---
title: "ã€API_ kataã€‘1.é€é createServer é–‹å•Ÿä¼ºæœå™¨"
sidebar_position: 1
---


## ğŸŸ§ é–‹å ´ç™½

```js
//>>> å¯¦ä½œï¼šé€é createServer é–‹å•Ÿä¼ºæœå™¨ 

// è¼‰å…¥ http æ¨¡çµ„
const http = require("http");

// è«‹æ±‚ èˆ‡ å›è¦†
const requestListener = (req, res) => {
  res.writeHead(200, { "Content-Type": "text/plain" }); // å›æ‡‰ header
  res.write("hello"); // å›æ‡‰å…§å®¹
  res.end(); // çµæŸä¸¦é€å‡ºå›æ‡‰
};

// å»ºç«‹ server
const server = http.createServer(requestListener);
server.listen(3005);

```

### ğŸŸ¢ DO

ğŸ‘‰ **å»ºç«‹ä¸€å€‹æœ€åŸºæœ¬çš„ HTTP Serverï¼Œç›£è½ 3005 portï¼Œä¸¦åœ¨æ¯æ¬¡æ”¶åˆ°è«‹æ±‚æ™‚å›å‚³ä¸€æ®µç´”æ–‡å­— `hello`ã€‚**
- åªè¦ç€è¦½å™¨æˆ–å·¥å…·ï¼ˆä¾‹å¦‚ curlã€Postmanï¼‰æ‰“ï¼š

```
http://localhost:3005
```

- å°±æœƒçœ‹åˆ°ï¼š

```
hello
```

---

### ğŸŸ¡ WHAT

#### 1ï¸âƒ£ `const http = require("http");`

* è¼‰å…¥ **Node.js å…§å»ºçš„ http æ¨¡çµ„**
* ä¸éœ€è¦å®‰è£ npm å¥—ä»¶
* æä¾›ï¼š
  * å»ºç«‹ HTTP Server
  * è™•ç† request èˆ‡ response

---

#### 2ï¸âƒ£ `const requestListener = (req, res) => { ... }`

é€™æ˜¯ä¸€å€‹ **è«‹æ±‚è™•ç†å‡½å¼ï¼ˆcallback functionï¼‰**

Node.js åœ¨æ¯æ¬¡æ”¶åˆ° HTTP è«‹æ±‚æ™‚ï¼Œæœƒå¹«ä½ å‘¼å«å®ƒï¼Œä¸¦å‚³å…¥ï¼š
* `req`ï¼šRequest ç‰©ä»¶
  ğŸ‘‰ åŒ…å« methodã€urlã€headers ç­‰è«‹æ±‚è³‡è¨Š
* `res`ï¼šResponse ç‰©ä»¶
  ğŸ‘‰ ç”¨ä¾†å›å‚³è³‡æ–™çµ¦ client

---

#### 3ï¸âƒ£ `res.writeHead(200, { "Content-Type": "text/plain" });`

ğŸ‘‰ è¨­å®š **HTTP å›æ‡‰çš„ header**

* `200`ï¼šHTTP ç‹€æ…‹ç¢¼ï¼Œä»£è¡¨è«‹æ±‚æˆåŠŸ
* `Content-Type: text/plain`ï¼š

  * å‘Šè¨´ç€è¦½å™¨ï¼šé€™æ˜¯ç´”æ–‡å­—
  * ä¸æœƒç•¶ HTML è§£æ

---

#### 4ï¸âƒ£ `res.write("hello");`

ğŸ‘‰ å¯«å…¥ **å›æ‡‰å…§å®¹ï¼ˆbodyï¼‰**

* å¯ä»¥å‘¼å«å¤šæ¬¡
* è³‡æ–™æœƒå…ˆæš«å­˜åœ¨ response buffer

---

#### 5ï¸âƒ£ `res.end();`

ğŸ‘‰ **çµæŸ responseï¼Œä¸¦çœŸæ­£é€å‡ºè³‡æ–™**

âš ï¸ å¦‚æœæ²’æœ‰å‘¼å« `res.end()`ï¼š

* é€£ç·šæœƒä¸€ç›´å¡ä½
* ç€è¦½å™¨æœƒé¡¯ç¤º loading

---

#### 6ï¸âƒ£ `http.createServer(requestListener);`
:::tip
ğŸ‘‰ å»ºç«‹ä¸€å€‹ HTTP Server

* å‚³å…¥çš„ `requestListener`ï¼š
  * å°±æ˜¯ã€Œæ¯ä¸€å€‹è«‹æ±‚è¦æ€éº¼è™•ç†ã€

* Node.js å…§éƒ¨æœƒåœ¨æœ‰è«‹æ±‚æ™‚ï¼š

  * è‡ªå‹•å‘¼å«é€™å€‹ function

:::
---

### 7ï¸âƒ£ `server.listen(3005);`

ğŸ‘‰ è®“ Server é–‹å§‹ç›£è½ **3005 port**

* OS æœƒæŠŠé€åˆ°é€™å€‹ port çš„è«‹æ±‚
* è½‰äº¤çµ¦é€™å€‹ Node.js process

---

## ğŸ”µ HOWï¼ˆæ•´å€‹æµç¨‹æ€éº¼è·‘ï¼‰

### è«‹æ±‚é€²ä¾†æ™‚çš„å¯¦éš›æµç¨‹

```
Clientï¼ˆç€è¦½å™¨ / curlï¼‰
        â†“
http://localhost:3005
        â†“
Node.js HTTP Server
        â†“
requestListener(req, res)
        â†“
res.writeHead()
res.write()
res.end()
        â†“
Client æ”¶åˆ°å›æ‡‰
```

---

## ğŸ”´ WHYï¼ˆç‚ºä»€éº¼è¦é€™æ¨£è¨­è¨ˆï¼‰

### ç‚ºä»€éº¼è¦ç”¨ `http.createServer`ï¼Ÿ

* Node.js æ˜¯ **äº‹ä»¶é©…å‹•**
* Server æœ¬è³ªä¸Šå°±æ˜¯ï¼š

  * ç­‰å¾…äº‹ä»¶ï¼ˆrequestï¼‰
  * ç™¼ç”Ÿæ™‚å‘¼å« callback

é€™å€‹è¨­è¨ˆè®“ Node.js éå¸¸é©åˆï¼š

* é«˜ä½µç™¼
* I/O å¯†é›†å‹æ‡‰ç”¨

---

### ç‚ºä»€éº¼è¦ `res.end()`ï¼Ÿ

ğŸ‘‰ HTTP æ˜¯ã€Œä¸€ä¾†ä¸€å›ã€çš„å”å®š

* Client éœ€è¦çŸ¥é“ï¼š

  * å›æ‡‰ä»€éº¼æ™‚å€™çµæŸ
* `res.end()` å°±æ˜¯æ˜ç¢ºå‘Šè¨´ Nodeï¼š

  * ã€Œè³‡æ–™é€å®Œäº†ï¼Œå¯ä»¥é—œé€™æ¬¡è«‹æ±‚äº†ã€

---

### ç‚ºä»€éº¼å¯¦å‹™ä¸Šå¾ˆå°‘ç›´æ¥ç”¨ `http`ï¼Ÿ

å› ç‚ºï¼š

* è¦è‡ªå·±è™•ç†ï¼š

  * routing
  * header
  * error
  * JSON parse

* æ‰€ä»¥æ‰æœƒæœ‰ï¼š

  * Express
  * Fastify
  * NestJS

ğŸ‘‰ **é‡è¦**
- <Highlight color="#1877F2">æ‰€æœ‰ Node.js Web Framework çš„ã€Œæœ€åº•å±¤åŸºç¤ã€</Highlight>

---
:::tip
> é€™æ®µç¨‹å¼ä½¿ç”¨ Node.js å…§å»ºçš„ http æ¨¡çµ„å»ºç«‹ä¸€å€‹ HTTP Serverï¼Œé€é createServer è¨»å†Šè«‹æ±‚è™•ç†å‡½å¼ï¼Œåœ¨æ¯æ¬¡æ”¶åˆ°è«‹æ±‚æ™‚è¨­å®šå›æ‡‰ headerã€å¯«å…¥å…§å®¹ä¸¦çµæŸå›æ‡‰ï¼Œæœ€å¾Œç›£è½æŒ‡å®šçš„ port æä¾›æœå‹™ã€‚
:::
---

