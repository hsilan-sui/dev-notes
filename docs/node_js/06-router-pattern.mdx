---
title: "ã€Express_Routerã€‘Router é€²éšè¨­å®š"
sidebar_position: 6
---


## ğŸŸ§ æ²’æœ‰å€åˆ†è·¯ç”±(Router)çš„æ™‚å€™

:::tip
- Router æ˜¯ã€Œå°ˆé–€ç®¡ç†è·¯å¾‘èˆ‡è™•ç†å‡½å¼çš„åˆ†é¡å™¨ã€
- æ‹†è·¯å¾‘æ˜¯ç‚ºäº†è®“ç³»çµ±å¯è®€ã€å¯ç¶­è­·ã€å¯æ“´å……
:::

### 0ï¸âƒ£ æ²’æœ‰ Router çš„ä¸–ç•Œï¼ˆå°å°ˆæ¡ˆï¼‰
```bash
app.get('/events', ...)
app.get('/events/:id', ...)
app.post('/events', ...)
app.get('/orders/:id', ...)
app.post('/orders', ...)
```
- å•é¡Œæœƒç™¼ç”Ÿåœ¨ï¼š
  - æª”æ¡ˆè¶Šä¾†è¶Šé•·
  - events / orders / users å…¨æ··åœ¨ä¸€èµ·
  - æ–°äººä¾†çœ‹ä¸æ‡‚
  - æ‰¾ä¸åˆ°è·¯ç”±
  - æ”¹ä¸€å€‹åŠŸèƒ½æ€•ç‚¸å…¶ä»–
  - merge conflict çˆ†ç‚¸
  - ç„¡æ³•æˆæ¬Šçµ¦ä¸åŒäººç¶­è­·

### 1ï¸âƒ£ Router å‡ºç¾çš„ç›®çš„
- <Highlight>æŠŠã€ŒåŒä¸€é¡è³‡æºçš„è·¯å¾‘ã€æ”¶åœ¨ä¸€èµ·</Highlight>
- æ˜¯ç…§ è³‡æºé‚Šç•Œ æ‹†ï¼š
  - `events`
  - `orders`
  - `users`
  - `payments`

:::tip
- Router æ˜¯ä¸€å€‹ã€Œå­è·¯ç”±è¡¨ã€
- å°ˆé–€è² è²¬æŸä¸€é¡è³‡æºçš„è·¯å¾‘èˆ‡ handler å°æ‡‰é—œä¿‚
:::

- Router åšä¸‰ä»¶äº‹ï¼š
  - å…ˆåƒæ‰å…±åŒå‰ç¶´
  - åœ¨è‡ªå·±çš„ç¯„åœå…§å†é…å°è·¯å¾‘
  - æŠŠè«‹æ±‚äº¤çµ¦æ­£ç¢º handler

### 2ï¸âƒ£ æ‹†è·¯å¾‘å¾Œ
- å¯è®€æ€§
```js
app.use('/events', eventRouter);
```
- æ‰€æœ‰æ´»å‹•ç›¸é—œéƒ½åœ¨ eventRouter


- æ¬Šè²¬æ¸…æ¥š
  - Event åœ˜éšŠ â†’ eventRouter
  - Order åœ˜éšŠ â†’ orderRouter

- ä¸­ä»‹å±¤å¯ä»¥å±€éƒ¨å¥—ç”¨
```js
router.use(authMiddleware);
```
- åªæœ‰ã€Œeventsã€ç›¸é—œ API æ‰éœ€è¦é€™å€‹é©—è­‰


### 3ï¸âƒ£ ç¤ºç¯„ï¼šexpress.js
```jsx title="app.js"
const express = require('express');
const app = express();

app.get('/user/edit-profile', function(req, res) {
  res.send('profile');
})

app.get('/user/photo', function(req, res) {
  res.send('photo');
})

app.listen(3000);
```



--- 

- æˆ‘æƒ³è¦æŠŠuseræ‹†æˆç¨ç«‹router

```jsx title="app.js"
const express = require('express');
const app = express();
//å¼•å…¥Router å­è·¯ç”±è¡¨

const userRouter = require('.routes/user');

//app.use æ˜¯ã€Œæ› middleware æˆ– router çš„åœ°æ–¹ã€
//æ„æ€æ˜¯ï¼šç¬¦åˆæ¢ä»¶çš„è«‹æ±‚ï¼Œé€²ä¾†ä¸€å®šæœƒå…ˆè·‘å®ƒ
app.use('/user', userRouter)

app.listen(3000);
```

- æ‹†æˆuserRouter

```jsx title="/routes/user.js"
const express = require('express');
const router = express.Router();

router.get('/edit-profile', function(req, res) {
  res.send('profile');
})

router.get('/photo', function(req, res) {
  res.send('photo');
})

module.exports = router;
```
