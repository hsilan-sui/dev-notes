"use strict";(globalThis.webpackChunksui_dev_notes=globalThis.webpackChunksui_dev_notes||[]).push([[7083],{28453(n,e,l){l.d(e,{R:()=>d,x:()=>c});var r=l(96540);const i={},s=r.createContext(i);function d(n){const e=r.useContext(s);return r.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:d(n.components),r.createElement(s.Provider,{value:e},n.children)}},60724(n,e,l){l.r(e),l.d(e,{assets:()=>h,contentTitle:()=>c,default:()=>t,frontMatter:()=>d,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"LinuxSysadmin/week1-3","title":"W1-3:CRON vs ANACRON vs WORKER QUEUE\u7684\u5c0d\u7167","description":"\u5f9e\u6392\u7a0b\u5230\u4e8b\u4ef6\u9a45\u52d5\u80cc\u666f\u4efb\u52d9\u7684\u8a2d\u8a08\u601d\u7dad","source":"@site/docs/LinuxSysadmin/01-week1-3.mdx","sourceDirName":"LinuxSysadmin","slug":"/LinuxSysadmin/week1-3","permalink":"/dev-notes/docs/LinuxSysadmin/week1-3","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/LinuxSysadmin/01-week1-3.mdx","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"title":"W1-3:CRON vs ANACRON vs WORKER QUEUE\u7684\u5c0d\u7167","sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"W1-2:\u7cfb\u7d71\u7ba1\u7406\u5c64-\u6392\u7a0b\u8207\u80cc\u666f\u4efb\u52d9(anacron)","permalink":"/dev-notes/docs/LinuxSysadmin/week1-2"},"next":{"title":"W1-4:\u6211\u76ee\u524d\u53ef\u4ee5\u52d5\u624b\u505a\u7684 anacron \u5be6\u4f5c","permalink":"/dev-notes/docs/LinuxSysadmin/week1-4"}}');var i=l(74848),s=l(28453);const d={title:"W1-3:CRON vs ANACRON vs WORKER QUEUE\u7684\u5c0d\u7167",sidebar_position:3},c=void 0,h={},o=[{value:"\u5f9e\u6392\u7a0b\u5230\u4e8b\u4ef6\u9a45\u52d5\u80cc\u666f\u4efb\u52d9\u7684\u8a2d\u8a08\u601d\u7dad",id:"\u5f9e\u6392\u7a0b\u5230\u4e8b\u4ef6\u9a45\u52d5\u80cc\u666f\u4efb\u52d9\u7684\u8a2d\u8a08\u601d\u7dad",level:2},{value:"\u4e00\u3001\u5feb\u901f\u5224\u65b7\u6d41\u7a0b\uff08\u5148\u9078\u5c0d\u5de5\u5177\uff09",id:"\u4e00\u5feb\u901f\u5224\u65b7\u6d41\u7a0b\u5148\u9078\u5c0d\u5de5\u5177",level:2},{value:"\u4e8c\u3001cron\uff1a\u8655\u7406\u300c\u6642\u9593\u300d\u7684\u5de5\u5177",id:"\u4e8ccron\u8655\u7406\u6642\u9593\u7684\u5de5\u5177",level:2},{value:"Do\uff08\u505a\u4ec0\u9ebc\uff09",id:"do\u505a\u4ec0\u9ebc",level:3},{value:"What\uff08\u89e3\u6c7a\u4ec0\u9ebc\u554f\u984c\uff09",id:"what\u89e3\u6c7a\u4ec0\u9ebc\u554f\u984c",level:3},{value:"How\uff08\u600e\u9ebc\u505a\uff09",id:"how\u600e\u9ebc\u505a",level:3},{value:"Why\uff08\u70ba\u4ec0\u9ebc\u7528\u5b83\uff09",id:"why\u70ba\u4ec0\u9ebc\u7528\u5b83",level:3},{value:"\u4e09\u3001anacron\uff1a\u8655\u7406\u300c\u4e0d\u8981\u6f0f\u300d\u7684\u9700\u6c42",id:"\u4e09anacron\u8655\u7406\u4e0d\u8981\u6f0f\u7684\u9700\u6c42",level:2},{value:"Do\uff08\u505a\u4ec0\u9ebc\uff09",id:"do\u505a\u4ec0\u9ebc-1",level:3},{value:"What\uff08\u89e3\u6c7a\u4ec0\u9ebc\u554f\u984c\uff09",id:"what\u89e3\u6c7a\u4ec0\u9ebc\u554f\u984c-1",level:3},{value:"How\uff08\u600e\u9ebc\u505a\uff09",id:"how\u600e\u9ebc\u505a-1",level:3},{value:"Why\uff08\u70ba\u4ec0\u9ebc\u7528\u5b83\uff09",id:"why\u70ba\u4ec0\u9ebc\u7528\u5b83-1",level:3},{value:"\u56db\u3001worker queue\uff1a\u8655\u7406\u300c\u4e8b\u4ef6\u8207\u53ef\u9760\u5ea6\u300d",id:"\u56dbworker-queue\u8655\u7406\u4e8b\u4ef6\u8207\u53ef\u9760\u5ea6",level:2},{value:"Do\uff08\u505a\u4ec0\u9ebc\uff09",id:"do\u505a\u4ec0\u9ebc-2",level:3},{value:"What\uff08\u89e3\u6c7a\u4ec0\u9ebc\u554f\u984c\uff09",id:"what\u89e3\u6c7a\u4ec0\u9ebc\u554f\u984c-2",level:3},{value:"How\uff08\u600e\u9ebc\u505a\uff09",id:"how\u600e\u9ebc\u505a-2",level:3},{value:"Why\uff08\u70ba\u4ec0\u9ebc\u7528\u5b83\uff09",id:"why\u70ba\u4ec0\u9ebc\u7528\u5b83-2",level:3},{value:"\u4e94\u3001\u5be6\u969b\u61c9\u7528\uff1a\u4e8b\u4ef6\u9a45\u52d5\u7684 Worker Queue \u6982\u5ff5\u5be6\u4f5c",id:"\u4e94\u5be6\u969b\u61c9\u7528\u4e8b\u4ef6\u9a45\u52d5\u7684-worker-queue-\u6982\u5ff5\u5be6\u4f5c",level:2},{value:"\u60c5\u5883\u8aaa\u660e",id:"\u60c5\u5883\u8aaa\u660e",level:3},{value:"\u67b6\u69cb\u89d2\u8272\u5c0d\u61c9",id:"\u67b6\u69cb\u89d2\u8272\u5c0d\u61c9",level:3},{value:"\u4e8b\u4ef6\u9a45\u52d5 Worker Queue \u6d41\u7a0b",id:"\u4e8b\u4ef6\u9a45\u52d5-worker-queue-\u6d41\u7a0b",level:3},{value:"\u516d\u3001\u70ba\u4ec0\u9ebc\u9019\u662f Worker Queue\uff0c\u800c\u4e0d\u662f cron \u6216 anacron",id:"\u516d\u70ba\u4ec0\u9ebc\u9019\u662f-worker-queue\u800c\u4e0d\u662f-cron-\u6216-anacron",level:2},{value:"\u4e03\u3001\u7e3d\u7d50",id:"\u4e03\u7e3d\u7d50",level:2}];function x(n){const e={admonition:"admonition",blockquote:"blockquote",h2:"h2",h3:"h3",hr:"hr",li:"li",mermaid:"mermaid",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.h2,{id:"\u5f9e\u6392\u7a0b\u5230\u4e8b\u4ef6\u9a45\u52d5\u80cc\u666f\u4efb\u52d9\u7684\u8a2d\u8a08\u601d\u7dad",children:"\u5f9e\u6392\u7a0b\u5230\u4e8b\u4ef6\u9a45\u52d5\u80cc\u666f\u4efb\u52d9\u7684\u8a2d\u8a08\u601d\u7dad"}),"\n",(0,i.jsxs)(e.p,{children:["\u5728\u7cfb\u7d71\u8a2d\u8a08\u4e2d\uff0c\u300c\u80cc\u666f\u4efb\u52d9\u300d\u5e38\u5e38\u88ab\u6df7\u70ba\u4e00\u8ac7\uff0c\u4f46\u5be6\u969b\u4e0a ",(0,i.jsx)(e.strong,{children:"cron\u3001anacron \u8207 worker queue \u89e3\u6c7a\u7684\u662f\u4e0d\u540c\u985e\u578b\u7684\u554f\u984c"}),"\u3002"]}),"\n",(0,i.jsx)(e.p,{children:"\u56e0\u70ba\u6211\u76ee\u524d\u5c08\u6848\u5f88\u5e38\u4f7f\u7528\u5230Worker Queue\uff0c\u6240\u4ee5\u5148\u4f86\u505a\u500b\u5c0d\u7167\uff1a"}),"\n",(0,i.jsxs)(e.p,{children:["\u9019\u7bc7\u7b46\u8a18\u6574\u7406\u4e09\u8005\u7684\u5dee\u7570\uff0c\u4e26\u8aaa\u660e\u6211\u5728\u5be6\u52d9\u5c08\u6848\u4e2d\uff0c\u70ba\u4ec0\u9ebc\u9078\u64c7 ",(0,i.jsx)(e.strong,{children:"Worker Queue \u6982\u5ff5"})," \u4f86\u8655\u7406\u4e8b\u4ef6\u9a45\u52d5\u7684\u9577\u6642\u9593\u4efb\u52d9\u3002"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"\u4e00\u5feb\u901f\u5224\u65b7\u6d41\u7a0b\u5148\u9078\u5c0d\u5de5\u5177",children:"\u4e00\u3001\u5feb\u901f\u5224\u65b7\u6d41\u7a0b\uff08\u5148\u9078\u5c0d\u5de5\u5177\uff09"}),"\n",(0,i.jsx)(e.mermaid,{value:"flowchart TD\n    A[\u7cfb\u7d71\u9700\u8981\u57f7\u884c\u80cc\u666f\u4efb\u52d9]\n\n    A --\x3e B[\u662f\u5426\u9700\u8981\u56fa\u5b9a\u6642\u9593\u9ede\u57f7\u884c]\n    B --\x3e|\u662f| C[\u662f\u5426\u8981\u6c42\u6bcf\u5206\u9418\u7cbe\u6e96\u57f7\u884c]\n    B --\x3e|\u5426| D[\u662f\u5426\u9700\u8981\u78ba\u4fdd\u4efb\u52d9\u4e00\u5b9a\u6703\u5b8c\u6210]\n\n    C --\x3e|\u662f| CRON[\u4f7f\u7528 cron]\n    C --\x3e|\u5426| ANA[\u4f7f\u7528 anacron]\n\n    D --\x3e|\u662f| QUEUE[\u4f7f\u7528 worker queue]\n    D --\x3e|\u5426| CRON2[\u4f7f\u7528 cron]\n\n    classDef cron fill:#E3F2FD,stroke:#1565C0,stroke-width:1px\n    classDef anacron fill:#E8F5E9,stroke:#2E7D32,stroke-width:1px\n    classDef queue fill:#FFF3E0,stroke:#EF6C00,stroke-width:1px\n\n    class CRON,CRON2 cron\n    class ANA anacron\n    class QUEUE queue"}),"\n",(0,i.jsx)(e.admonition,{title:"My tip",type:"tip",children:(0,i.jsxs)(e.p,{children:["\u9019\u5f35\u5716\u7684\u91cd\u9ede\u662f\uff1a\n",(0,i.jsx)(e.strong,{children:"\u5148\u5224\u65b7\u554f\u984c\u985e\u578b\uff0c\u800c\u4e0d\u662f\u5148\u9078\u5de5\u5177\u3002"})]})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"\u4e8ccron\u8655\u7406\u6642\u9593\u7684\u5de5\u5177",children:"\u4e8c\u3001cron\uff1a\u8655\u7406\u300c\u6642\u9593\u300d\u7684\u5de5\u5177"}),"\n",(0,i.jsx)(e.h3,{id:"do\u505a\u4ec0\u9ebc",children:"Do\uff08\u505a\u4ec0\u9ebc\uff09"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u5728",(0,i.jsx)(e.strong,{children:"\u56fa\u5b9a\u6642\u9593\u9ede"}),"\u57f7\u884c\u6307\u4ee4\u6216\u8173\u672c"]}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"what\u89e3\u6c7a\u4ec0\u9ebc\u554f\u984c",children:"What\uff08\u89e3\u6c7a\u4ec0\u9ebc\u554f\u984c\uff09"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u6bcf\u5929\u5e7e\u9ede\u8dd1"}),"\n",(0,i.jsx)(e.li,{children:"\u6bcf 5 \u5206\u9418\u8dd1\u4e00\u6b21"}),"\n",(0,i.jsx)(e.li,{children:"\u6e96\u6642\u3001\u898f\u5f8b\u3001\u53ef\u9810\u671f"}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"how\u600e\u9ebc\u505a",children:"How\uff08\u600e\u9ebc\u505a\uff09"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u7531 cron daemon \u5e38\u99d0\u76e3\u807d\u6642\u9593"}),"\n",(0,i.jsx)(e.li,{children:"\u7cfb\u7d71\u5fc5\u9808\u662f\u958b\u6a5f\u72c0\u614b"}),"\n",(0,i.jsx)(e.li,{children:"\u6642\u9593\u5230\u6642\u57f7\u884c\u5c0d\u61c9\u4efb\u52d9"}),"\n",(0,i.jsx)(e.li,{children:"\u5982\u679c\u7cfb\u7d71\u5728\u8a72\u6642\u9593\u9ede\u95dc\u6a5f\uff0c\u4efb\u52d9\u4e0d\u6703\u88dc\u8dd1"}),"\n",(0,i.jsx)(e.li,{children:"cron \u4e0d\u6703\u8a18\u5f97\u932f\u904e\u7684\u4efb\u52d9"}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"why\u70ba\u4ec0\u9ebc\u7528\u5b83",children:"Why\uff08\u70ba\u4ec0\u9ebc\u7528\u5b83\uff09"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u7cfb\u7d71\u7a69\u5b9a\u5728\u7dda"}),"\n",(0,i.jsx)(e.li,{children:"\u4efb\u52d9\u672c\u8eab\u5f88\u5feb"}),"\n",(0,i.jsx)(e.li,{children:"\u5373\u4f7f\u932f\u904e\u4e00\u6b21\u4e5f\u4e0d\u5f71\u97ff\u6574\u9ad4\u6d41\u7a0b"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u5178\u578b\u5834\u666f"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u6bcf 5 \u5206\u9418\u6e05\u7406\u66ab\u5b58"}),"\n",(0,i.jsx)(e.li,{children:"\u6bcf\u5929\u51cc\u6668\u7522\u751f\u5831\u8868"}),"\n",(0,i.jsx)(e.li,{children:"\u5b9a\u671f\u540c\u6b65\u8cc7\u6599"}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"\u4e09anacron\u8655\u7406\u4e0d\u8981\u6f0f\u7684\u9700\u6c42",children:"\u4e09\u3001anacron\uff1a\u8655\u7406\u300c\u4e0d\u8981\u6f0f\u300d\u7684\u9700\u6c42"}),"\n",(0,i.jsx)(e.h3,{id:"do\u505a\u4ec0\u9ebc-1",children:"Do\uff08\u505a\u4ec0\u9ebc\uff09"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u88dc\u8dd1\u932f\u904e\u7684\u6392\u7a0b\u4efb\u52d9"}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"what\u89e3\u6c7a\u4ec0\u9ebc\u554f\u984c-1",children:"What\uff08\u89e3\u6c7a\u4ec0\u9ebc\u554f\u984c\uff09"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u96fb\u8166\u95dc\u6a5f"}),"\n",(0,i.jsx)(e.li,{children:"VM \u6216\u500b\u4eba\u96fb\u8166\u4e0d\u662f 24 \u5c0f\u6642\u958b\u8457"}),"\n",(0,i.jsx)(e.li,{children:"\u4ecd\u7136\u5e0c\u671b\u6bcf\u5929\u81f3\u5c11\u57f7\u884c\u4e00\u6b21"}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"how\u600e\u9ebc\u505a-1",children:"How\uff08\u600e\u9ebc\u505a\uff09"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u7cfb\u7d71\u958b\u6a5f\u5f8c\u6aa2\u67e5\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u6628\u5929\u662f\u5426\u57f7\u884c"}),"\n",(0,i.jsx)(e.li,{children:"\u5982\u679c\u6c92\u6709\uff0c\u5c31\u73fe\u5728\u88dc\u8dd1"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"why\u70ba\u4ec0\u9ebc\u7528\u5b83-1",children:"Why\uff08\u70ba\u4ec0\u9ebc\u7528\u5b83\uff09"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u6bd4\u6e96\u6642\u66f4\u5728\u610f\u4e0d\u8981\u6f0f"}),"\n",(0,i.jsx)(e.li,{children:"\u9069\u5408\u975e\u4f3a\u670d\u5668\u74b0\u5883"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u5178\u578b\u5834\u666f"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u6bcf\u65e5\u5099\u4efd\uff08\u4e0d\u5728\u4e4e\u5e7e\u9ede\uff09"}),"\n",(0,i.jsx)(e.li,{children:"\u6bcf\u65e5\u6e05\u7406 log"}),"\n",(0,i.jsx)(e.li,{children:"\u500b\u4eba\u96fb\u8166\u6216\u9593\u6b47\u6027\u958b\u6a5f\u7cfb\u7d71"}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"\u56dbworker-queue\u8655\u7406\u4e8b\u4ef6\u8207\u53ef\u9760\u5ea6",children:"\u56db\u3001worker queue\uff1a\u8655\u7406\u300c\u4e8b\u4ef6\u8207\u53ef\u9760\u5ea6\u300d"}),"\n",(0,i.jsx)(e.h3,{id:"do\u505a\u4ec0\u9ebc-2",children:"Do\uff08\u505a\u4ec0\u9ebc\uff09"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u628a\u4e8b\u60c5\u6392\u968a\uff0c\u4e00\u4ef6\u4e00\u4ef6\u8655\u7406"}),"\n",(0,i.jsx)(e.li,{children:"\u5c07\u5373\u6642\u8acb\u6c42\u8207\u9577\u6642\u9593\u4efb\u52d9\u89e3\u8026"}),"\n",(0,i.jsx)(e.li,{children:"\u7531\u4e8b\u4ef6\u89f8\u767c\u80cc\u666f\u6d41\u7a0b"}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"what\u89e3\u6c7a\u4ec0\u9ebc\u554f\u984c-2",children:"What\uff08\u89e3\u6c7a\u4ec0\u9ebc\u554f\u984c\uff09"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u4efb\u52d9\u57f7\u884c\u6642\u9593\u4e0d\u56fa\u5b9a"}),"\n",(0,i.jsx)(e.li,{children:"\u5916\u90e8\u7cfb\u7d71\u56de\u61c9\u6162\u6216\u4e0d\u7a69\u5b9a"}),"\n",(0,i.jsx)(e.li,{children:"API \u4e0d\u9069\u5408\u540c\u6b65\u7b49\u5f85"}),"\n",(0,i.jsx)(e.li,{children:"\u4efb\u52d9\u9700\u8981\u78ba\u4fdd\u6700\u7d42\u5b8c\u6210"}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"how\u600e\u9ebc\u505a-2",children:"How\uff08\u600e\u9ebc\u505a\uff09"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u4f7f\u7528\u8005\u4e8b\u4ef6\u89f8\u767c\u4efb\u52d9"}),"\n",(0,i.jsx)(e.li,{children:"Producer \u8ca0\u8cac\u5efa\u7acb\u4efb\u52d9"}),"\n",(0,i.jsx)(e.li,{children:"\u4efb\u52d9\u9032\u5165\u4f47\u5217\u96c6\u4e2d\u7ba1\u7406"}),"\n",(0,i.jsx)(e.li,{children:"Worker \u7a0b\u5f0f\u8ca0\u8cac\u6d88\u8cbb\u4efb\u52d9"}),"\n",(0,i.jsx)(e.li,{children:"Redis \u5132\u5b58\u4efb\u52d9\u72c0\u614b\u8207\u4f47\u5217"}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"why\u70ba\u4ec0\u9ebc\u7528\u5b83-2",children:"Why\uff08\u70ba\u4ec0\u9ebc\u7528\u5b83\uff09"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u53ef\u9760\u6027\u512a\u5148"}),"\n",(0,i.jsx)(e.li,{children:"\u4e0d\u4f9d\u8cf4\u56fa\u5b9a\u6642\u9593\u9ede"}),"\n",(0,i.jsx)(e.li,{children:"API \u4e0d\u6703\u88ab\u9577\u4efb\u52d9\u5361\u4f4f"}),"\n",(0,i.jsx)(e.li,{children:"\u53ef\u9010\u6b65\u64f4\u5145\u4efb\u52d9\u8655\u7406\u80fd\u529b"}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"\u4e94\u5be6\u969b\u61c9\u7528\u4e8b\u4ef6\u9a45\u52d5\u7684-worker-queue-\u6982\u5ff5\u5be6\u4f5c",children:"\u4e94\u3001\u5be6\u969b\u61c9\u7528\uff1a\u4e8b\u4ef6\u9a45\u52d5\u7684 Worker Queue \u6982\u5ff5\u5be6\u4f5c"}),"\n",(0,i.jsxs)(e.p,{children:["\u9019\u4e0d\u662f\u4e00\u500b\u901a\u7528 Queue \u7522\u54c1\uff0c\u800c\u662f",(0,i.jsx)(e.strong,{children:"Worker Queue \u6982\u5ff5\u7684\u5be6\u969b\u61c9\u7528"}),"\uff0c\u91cd\u9ede\u5728\u6d41\u7a0b\u8a2d\u8a08\u8207\u8077\u8cac\u62c6\u5206\u3002"]}),"\n",(0,i.jsx)(e.h3,{id:"\u60c5\u5883\u8aaa\u660e",children:"\u60c5\u5883\u8aaa\u660e"}),"\n",(0,i.jsx)(e.p,{children:"\u4f7f\u7528\u8005\u5728 LINE OA \u767c\u9001\u5730\u653f\u67e5\u8a62\u9700\u6c42\uff0c\u6b64\u6d41\u7a0b\u5177\u5099\u4ee5\u4e0b\u7279\u6027\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u4efb\u52d9\u7531\u4f7f\u7528\u8005\u884c\u70ba\u89f8\u767c"}),"\n",(0,i.jsx)(e.li,{children:"\u9700\u67e5\u8a62\u5916\u90e8\u653f\u5e9c\u7cfb\u7d71"}),"\n",(0,i.jsx)(e.li,{children:"\u57f7\u884c\u6642\u9593\u4e0d\u53ef\u9810\u671f"}),"\n",(0,i.jsx)(e.li,{children:"\u4e0d\u9069\u5408\u540c\u6b65\u56de\u61c9"}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["\u56e0\u6b64\u63a1\u7528 ",(0,i.jsx)(e.strong,{children:"Worker Queue \u6982\u5ff5"})," \u4f86\u8655\u7406\u3002"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"\u67b6\u69cb\u89d2\u8272\u5c0d\u61c9",children:"\u67b6\u69cb\u89d2\u8272\u5c0d\u61c9"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"LINE OA\uff1a\u4e8b\u4ef6\u4f86\u6e90"}),"\n",(0,i.jsx)(e.li,{children:"FastAPI\uff1a\u63a5\u6536\u8acb\u6c42\u4e26\u7acb\u5373\u56de\u61c9"}),"\n",(0,i.jsx)(e.li,{children:"Node producer\uff1a\u5efa\u7acb\u80cc\u666f\u4efb\u52d9"}),"\n",(0,i.jsx)(e.li,{children:"Redis\uff08Docker \u555f\u7528\uff09\uff1a\u4efb\u52d9\u4f47\u5217\u8207\u72c0\u614b\u5132\u5b58"}),"\n",(0,i.jsx)(e.li,{children:"BullMQ\uff1a\u4efb\u52d9\u7ba1\u7406\u8207\u8abf\u5ea6"}),"\n",(0,i.jsx)(e.li,{children:"Node worker \u7a0b\u5f0f\uff1a\u6d88\u8cbb\u4f47\u5217\u4e2d\u7684\u4efb\u52d9"}),"\n",(0,i.jsx)(e.li,{children:"Cloudflare Worker\uff1a\u8655\u7406\u5f8c\u7e8c\u901a\u77e5\u6d41\u7a0b"}),"\n",(0,i.jsx)(e.li,{children:"Cloudflare R2\uff1a\u5132\u5b58\u4efb\u52d9\u7522\u51fa\u7d50\u679c"}),"\n",(0,i.jsx)(e.li,{children:"LINE Push\uff1a\u63a8\u64ad\u7d50\u679c\u7d66\u4f7f\u7528\u8005"}),"\n"]}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsxs)(e.p,{children:["Docker \u50c5\u7528\u65bc\u555f\u52d5 Redis\uff0c\n",(0,i.jsx)(e.strong,{children:"\u4e0d\u662f Worker \u57f7\u884c\u74b0\u5883\u7684\u4e00\u90e8\u5206"}),"\u3002"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"\u4e8b\u4ef6\u9a45\u52d5-worker-queue-\u6d41\u7a0b",children:"\u4e8b\u4ef6\u9a45\u52d5 Worker Queue \u6d41\u7a0b"}),"\n",(0,i.jsx)(e.mermaid,{value:"flowchart TD\n    U[\u4f7f\u7528\u8005\u5728 LINE OA \u767c\u9001\u67e5\u8a62]\n\n    U --\x3e API[FastAPI \u63a5\u6536\u8acb\u6c42]\n    API --\x3e P[Node Producer \u5efa\u7acb\u4efb\u52d9]\n    P --\x3e Q[Redis \u4efb\u52d9\u4f47\u5217]\n\n    Q --\x3e W[Node Worker \u7a0b\u5f0f\u53d6\u51fa\u4efb\u52d9]\n    W --\x3e T[\u57f7\u884c\u5730\u653f\u8cc7\u6599\u67e5\u8a62]\n    T --\x3e S[\u5132\u5b58\u7d50\u679c\u81f3 R2]\n\n    S --\x3e CF[Cloudflare Worker \u8655\u7406\u901a\u77e5]\n    CF --\x3e L[LINE Push \u63a8\u64ad\u7d50\u679c]\n\n    classDef event fill:#E3F2FD,stroke:#1565C0,stroke-width:1px\n    classDef producer fill:#E8F5E9,stroke:#2E7D32,stroke-width:1px\n    classDef queue fill:#FFF3E0,stroke:#EF6C00,stroke-width:1px\n    classDef worker fill:#FCE4EC,stroke:#AD1457,stroke-width:1px\n\n    class U event\n    class API,P producer\n    class Q queue\n    class W,T,S,CF,L worker"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"\u516d\u70ba\u4ec0\u9ebc\u9019\u662f-worker-queue\u800c\u4e0d\u662f-cron-\u6216-anacron",children:"\u516d\u3001\u70ba\u4ec0\u9ebc\u9019\u662f Worker Queue\uff0c\u800c\u4e0d\u662f cron \u6216 anacron"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u4efb\u52d9\u4e0d\u662f\u56fa\u5b9a\u6642\u9593\u767c\u751f"}),"\n",(0,i.jsx)(e.li,{children:"\u4efb\u52d9\u7531\u4f7f\u7528\u8005\u4e8b\u4ef6\u89f8\u767c"}),"\n",(0,i.jsx)(e.li,{children:"\u6bcf\u6b21\u4efb\u52d9\u5167\u5bb9\u4e0d\u540c"}),"\n",(0,i.jsx)(e.li,{children:"\u7121\u6cd5\u4e8b\u5148\u6392\u7a0b"}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["\u9019\u662f",(0,i.jsx)(e.strong,{children:"\u4e8b\u4ef6\u9a45\u52d5\u7684\u80cc\u666f\u4efb\u52d9\u8655\u7406\u554f\u984c"}),"\uff0c\u800c\u4e0d\u662f\u6392\u7a0b\u554f\u984c\u3002"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"\u4e03\u7e3d\u7d50",children:"\u4e03\u3001\u7e3d\u7d50"}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsxs)(e.p,{children:["cron \u7ba1\u6642\u9593\nanacron \u7ba1\u907a\u6f0f\n",(0,i.jsx)(e.strong,{children:"worker queue \u7ba1\u4e8b\u4ef6\u8207\u53ef\u9760\u5ea6"})]}),"\n"]}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsx)(e.p,{children:"\u672c\u7cfb\u7d71\u5be6\u4f5c\u4e8b\u4ef6\u9a45\u52d5\u7684 Worker Queue \u6982\u5ff5\uff0c\n\u4f7f\u7528 Redis \u8207 BullMQ \u7ba1\u7406\u80cc\u666f\u4efb\u52d9\uff0c\n\u4e26\u5c07\u5373\u6642 API \u8207\u9577\u6642\u9593\u4efb\u52d9\u8655\u7406\u6d41\u7a0b\u89e3\u8026\u3002"}),"\n"]}),"\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"\u554f\u984c"}),(0,i.jsx)(e.th,{children:"\u9078\u8ab0"})]})}),(0,i.jsxs)(e.tbody,{children:[(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"\u8981\u4e0d\u8981\u6e96\u6642"}),(0,i.jsx)(e.td,{children:"cron"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"\u932f\u904e\u8981\u4e0d\u8981\u88dc"}),(0,i.jsx)(e.td,{children:"anacron"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"\u4efb\u52d9\u4e00\u5b9a\u8981\u6210\u529f"}),(0,i.jsx)(e.td,{children:"worker queue"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"\u7cfb\u7d71\u4e0d\u4e00\u5b9a\u958b\u8457"}),(0,i.jsx)(e.td,{children:"anacron"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"\u4efb\u52d9\u5f88\u591a\u5f88\u91cd"}),(0,i.jsx)(e.td,{children:"worker queue"})]})]})]}),"\n",(0,i.jsx)(e.hr,{})]})}function t(n={}){const{wrapper:e}={...(0,s.R)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(x,{...n})}):x(n)}}}]);