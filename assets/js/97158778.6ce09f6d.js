"use strict";(globalThis.webpackChunksui_dev_notes=globalThis.webpackChunksui_dev_notes||[]).push([[4795],{3312(n,e,s){s.r(e),s.d(e,{assets:()=>a,contentTitle:()=>r,default:()=>h,frontMatter:()=>c,metadata:()=>l,toc:()=>o});const l=JSON.parse('{"id":"JavaScript/ajaxXhr copy","title":"\u3010AJAX_ES5\u3011\u4f7f\u7528(XHR)XMLHttpReques\u767c\u9001 Ajax Call","description":"\ud83d\udfe7 \u767c\u9001ajax call: XHR\u8acb\u6c42","source":"@site/docs/JavaScript/02-ajaxXhr copy.mdx","sourceDirName":"JavaScript","slug":"/JavaScript/ajaxXhr copy","permalink":"/dev-notes/docs/JavaScript/ajaxXhr copy","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/JavaScript/02-ajaxXhr copy.mdx","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"title":"\u3010AJAX_ES5\u3011\u4f7f\u7528(XHR)XMLHttpReques\u767c\u9001 Ajax Call","sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"\u3010\u7b46\u8a18_\u526f\u6a19\u7c64\u3011\u7b46\u8a18\u7d50\u69cb","permalink":"/dev-notes/docs/JavaScript/markdown-features"},"next":{"title":"\u3010AJAX_ES6\u3011Promise","permalink":"/dev-notes/docs/JavaScript/promise"}}');var t=s(74848),i=s(28453);const c={title:"\u3010AJAX_ES5\u3011\u4f7f\u7528(XHR)XMLHttpReques\u767c\u9001 Ajax Call",sidebar_position:2},r=void 0,a={},o=[{value:"\ud83d\udfe7 \u767c\u9001ajax call: XHR\u8acb\u6c42",id:"-\u767c\u9001ajax-call-xhr\u8acb\u6c42",level:2},{value:"1\ufe0f\u20e3 \u5b9a\u7fa9\u6d41\u7a0b",id:"1\ufe0f\u20e3-\u5b9a\u7fa9\u6d41\u7a0b",level:3},{value:"2\ufe0f\u20e3 \u5c0d\u61c9\u7a0b\u5f0f\u78bc\uff1a",id:"2\ufe0f\u20e3-\u5c0d\u61c9\u7a0b\u5f0f\u78bc",level:3},{value:"3\ufe0f\u20e3 \u5148\u628a\u8acb\u6c42\u5305\u6210\u51fd\u5f0f",id:"3\ufe0f\u20e3-\u5148\u628a\u8acb\u6c42\u5305\u6210\u51fd\u5f0f",level:3},{value:"4\ufe0f\u20e3 \u56de\u547c\u5730\u7344\uff08\u300c\u55ae\u4e00\u8acb\u6c42 \u2192 \u76f8\u4f9d\u8acb\u6c42\u300d\u7684\u771f\u5be6\u75db\u9ede\uff09",id:"4\ufe0f\u20e3-\u56de\u547c\u5730\u7344\u55ae\u4e00\u8acb\u6c42--\u76f8\u4f9d\u8acb\u6c42\u7684\u771f\u5be6\u75db\u9ede",level:3},{value:"\ud83d\udfe6 \u7528setTimeOut()\u518d\u89e3\u91cb\u4e00\u6b21",id:"-\u7528settimeout\u518d\u89e3\u91cb\u4e00\u6b21",level:2},{value:"0\ufe0f\u20e3 \u6539\u5beb\u6210 ES6 Promise",id:"0\ufe0f\u20e3-\u6539\u5beb\u6210-es6-promise",level:3},{value:"1\ufe0f\u20e3 \u6539\u5beb async / await",id:"1\ufe0f\u20e3-\u6539\u5beb-async--await",level:3},{value:"\u6642\u5e8f\u5716",id:"\u6642\u5e8f\u5716",level:3}];function d(n){const e={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",hr:"hr",img:"img",li:"li",mermaid:"mermaid",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.h2,{id:"-\u767c\u9001ajax-call-xhr\u8acb\u6c42",children:"\ud83d\udfe7 \u767c\u9001ajax call: XHR\u8acb\u6c42"}),"\n",(0,t.jsxs)(e.blockquote,{children:["\n",(0,t.jsx)(e.p,{children:"\u5148\u6e2c\u8a66\u7b2c\u4e00\u4ee3\u7684 AJAX call \u767c\u9001 XHR(XMLHttpRequest)\u8acb\u6c42"}),"\n"]}),"\n",(0,t.jsx)(e.admonition,{type:"note",children:(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsx)(e.p,{children:"url \u6211\u60f3\u73a9\u5169\u7a2e\uff1a"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"https://raw.githubusercontent.com/hexschool/2021-ui-frontend-job/master/frontend_data.json",children:"\u516d\u89d2\u63d0\u4f9b"})}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.a,{href:"https://restcountries.com/",children:"REST Countries API"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"\u6211\u60f3\u8981\u5f9eAPI\u88e1\u62ff\u5230\u67d0\u570b\u5bb6\u7684\u76f8\u95dc\u8cc7\u6599"}),"\n"]}),"\n"]}),"\n"]})}),"\n",(0,t.jsx)(e.hr,{}),"\n",(0,t.jsx)(e.h3,{id:"1\ufe0f\u20e3-\u5b9a\u7fa9\u6d41\u7a0b",children:"1\ufe0f\u20e3 \u5b9a\u7fa9\u6d41\u7a0b"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"1. \u5efa\u7acb\u4e00\u500b XMLHttpRequest \u7269\u4ef6\n2. \u8a2d\u5b9a\u767c\u9001\u7db2\u8def\u8acb\u6c42\u7684\u65b9\u6cd5 \u8207 \u8a2d\u5b9a\u7db2\u5740 .open()\n3. \u53ea\u662f\u300c\u958b\u59cb\u8acb\u6c42\u300d .send() ==> request.send() \u4e26\u4e0d\u6703\u7b49\u8cc7\u6599\u56de\u4f86\n4. \u700f\u89bd\u5668\u5728\u80cc\u666f\u767c\u9001 HTTP request(\u7db2\u8def\u8acb\u6c42\u662f\u975e\u540c\u6b65)\n5. \u4f3a\u670d\u5668\u56de\u61c9\u8cc7\u6599\n6. \u8a3b\u518a\u4e00\u500b callback\uff08load \u4e8b\u4ef6\uff09\n7. \u700f\u89bd\u5668\u63a5\u6536\u5b8c\u6574 response\n8. \ud83d\udc49 \u89f8\u767c load \u4e8b\u4ef6 => \u8a3b\u518a load \u4e8b\u4ef6 callback\uff08\u900f\u904e addEventListener\uff09\n"})}),"\n",(0,t.jsxs)(e.admonition,{type:"danger",children:[(0,t.jsx)(e.p,{children:"\u2714 send() \u4e0d\u6703\u7b49\u5f85\u8cc7\u6599 => \u975e\u540c\u6b65"}),(0,t.jsx)(e.p,{children:"\u2714 \u4e00\u5207\u90fd\u8981\u9760 \u8a2d\u8a08load callback \u4f86\u63a5\u7d50\u679c"}),(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["load \u4e8b\u4ef6\u89f8\u767c\u7684\u689d\u4ef6\u662f\uff1a","\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"\u2714 \u8acb\u6c42\u6210\u529f\u9001\u51fa"}),"\n",(0,t.jsx)(e.li,{children:"\u2714 \u4f3a\u670d\u5668\u5df2\u56de\u61c9"}),"\n",(0,t.jsx)(e.li,{children:"\u2714 \u56de\u61c9\u5167\u5bb9 \u5b8c\u6574\u63a5\u6536\u5b8c\u6210"}),"\n",(0,t.jsx)(e.li,{children:"\u2714 responseText \u5df2\u53ef\u5b89\u5168\u8b80\u53d6"}),"\n",(0,t.jsx)(e.li,{children:"\ud83d\udc49 \u9019\u6642\u624d\u80fd JSON.parse()"}),"\n"]}),"\n"]}),"\n"]})]}),"\n",(0,t.jsxs)(e.table,{children:[(0,t.jsx)(e.thead,{children:(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.th,{children:"\u4e8b\u4ef6"}),(0,t.jsx)(e.th,{children:"\u4ec0\u9ebc\u6642\u5019\u89f8\u767c"}),(0,t.jsx)(e.th,{children:"\u8aaa\u4eba\u8a71"})]})}),(0,t.jsxs)(e.tbody,{children:[(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:(0,t.jsx)(e.code,{children:"load"})}),(0,t.jsx)(e.td,{children:"\u56de\u61c9\u5b8c\u6574\u6536\u5230"}),(0,t.jsx)(e.td,{children:"\u8cc7\u6599\u53ef\u4ee5\u7528\u4e86"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:(0,t.jsx)(e.code,{children:"error"})}),(0,t.jsx)(e.td,{children:"\u7db2\u8def\u932f\u8aa4"}),(0,t.jsx)(e.td,{children:"\u8acb\u6c42\u5931\u6557"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:(0,t.jsx)(e.code,{children:"timeout"})}),(0,t.jsx)(e.td,{children:"\u8d85\u904e\u6642\u9593"}),(0,t.jsx)(e.td,{children:"\u7b49\u592a\u4e45"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:(0,t.jsx)(e.code,{children:"abort"})}),(0,t.jsx)(e.td,{children:"\u88ab\u53d6\u6d88"}),(0,t.jsx)(e.td,{children:"\u88ab\u4e2d\u65b7"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:(0,t.jsx)(e.code,{children:"readystatechange"})}),(0,t.jsx)(e.td,{children:"\u72c0\u614b\u6539\u8b8a"}),(0,t.jsx)(e.td,{children:"\u4f4e\u968e\u6d41\u7a0b"})]})]})]}),"\n",(0,t.jsx)(e.h3,{id:"2\ufe0f\u20e3-\u5c0d\u61c9\u7a0b\u5f0f\u78bc",children:"2\ufe0f\u20e3 \u5c0d\u61c9\u7a0b\u5f0f\u78bc\uff1a"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-js",children:'"use strict";\n\n// ES5\u65b9\u5f0f\uff1a\u4f7f\u7528 XMLHttpRequest \u767c\u9001 GET \u8acb\u6c42\nconst request = new XMLHttpRequest();\n\n// \u8a2d\u5b9a\u8acb\u6c42\uff08\u65b9\u6cd5 + URL\uff09\nrequest.open("GET", "https://restcountries.com/v3.1/name/portugal");\n\n// \u26a0\ufe0f \u975e\u540c\u6b65|\u767c\u9001\u8acb\u6c42\uff08\u975e\u540c\u6b65\uff0c\u4e0d\u6703\u7b49\u5f85\u56de\u50b3\uff09\nrequest.send();\n\n// \u8a3b\u518a callback\uff0c\u7b49\u5f85\u8cc7\u6599\u56de\u4f86\nrequest.addEventListener("load", function () {\n  console.log(this); // XMLHttpRequest instance\n  // const data = JSON.parse(this.responseText);\n});\n'})}),"\n",(0,t.jsx)("iframe",{height:"300",style:{width:"100%"},scrolling:"no",title:"XHR AJAX Demo",src:"https://codepen.io/sui-hsialn/embed/ZYOeBbP?default-tab=js",frameBorder:"0",loading:"lazy",allowFullScreen:!0}),"\n",(0,t.jsx)(e.p,{children:"\ud83d\udd39 \u88dc\u5145 1\uff1a\u70ba\u4ec0\u9ebc send \u4e0d\u7b49\u8cc7\u6599\uff1f"}),"\n",(0,t.jsxs)(e.blockquote,{children:["\n",(0,t.jsx)(e.p,{children:"\u56e0\u70ba Ajax \u662f\u975e\u540c\u6b65\u8acb\u6c42\uff0c .send() \u7684\u8077\u8cac\u53ea\u662f\u300c\u9001\u51fa\u8acb\u6c42\u300d\uff0c\u8cc7\u6599\u6703\u5728\u80cc\u666f\u50b3\u8f38\uff0cJavaScript \u4e3b\u57f7\u884c\u7dd2\u4e0d\u6703\u88ab\u963b\u585e\u3002"}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:"\ud83d\udd39 \u88dc\u5145 2\uff1a\u70ba\u4ec0\u9ebc\u4e00\u5b9a\u8981 callback\uff1f"}),"\n",(0,t.jsxs)(e.blockquote,{children:["\n",(0,t.jsx)(e.p,{children:"\u56e0\u70ba\u8cc7\u6599\u300c\u4ec0\u9ebc\u6642\u5019\u56de\u4f86\u300d\u662f\u7121\u6cd5\u9810\u671f\u7684\uff0cJavaScript \u53ea\u80fd\u5148\u8a3b\u518a\u4e00\u500b callback\uff0c\u7b49\u4f3a\u670d\u5668\u56de\u61c9\u5b8c\u6210\u6642\uff0c\u518d\u7531\u700f\u89bd\u5668\u547c\u53eb\u9019\u500b\u51fd\u5f0f\u4f86\u8655\u7406\u7d50\u679c\u3002"}),"\n"]}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["\u4e5f\u5c31\u662f\u8aaa\uff0c\u5728 Ajax \u4e2d\uff1a","\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"\u6211\u5148\u5b9a\u7fa9\u300c\u8cc7\u6599\u56de\u4f86\u5f8c\u8981\u505a\u4ec0\u9ebc\u300d"}),"\n",(0,t.jsx)(e.li,{children:"\u4f46\u4e0d\u662f\u6211\u6c7a\u5b9a\u300c\u4ec0\u9ebc\u6642\u5019\u505a\u300d"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:"\ud83d\udd39 \u88dc\u5145 3\uff1a\u70ba\u4ec0\u9ebc\u73fe\u5728\u4e0d\u5e38\u7528 XHR\uff1f"}),"\n",(0,t.jsxs)(e.blockquote,{children:["\n",(0,t.jsx)(e.p,{children:"\u56e0\u70ba\u8cc7\u6599\u56de\u4f86\u7684\u6642\u9593\u4e0d\u78ba\u5b9a\uff0c\u53ea\u80fd\u5728\u4e8b\u4ef6\u767c\u751f\u6642\u8655\u7406\u7d50\u679c\u3002"}),"\n"]}),"\n",(0,t.jsxs)(e.table,{children:[(0,t.jsx)(e.thead,{children:(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.th,{children:"\u554f\u984c"}),(0,t.jsx)(e.th,{children:"\u8aaa\u660e"})]})}),(0,t.jsxs)(e.tbody,{children:[(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"\u53ef\u8b80\u6027\u5dee"}),(0,t.jsx)(e.td,{children:"\u6d41\u7a0b\u88ab\u62c6\u6563"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"\u5de2\u72c0 callback"}),(0,t.jsx)(e.td,{children:"\u96e3\u7dad\u8b77"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"\u932f\u8aa4\u8655\u7406\u9ebb\u7169"}),(0,t.jsx)(e.td,{children:"\u5fc5\u9808\u624b\u52d5\u5224\u65b7"})]})]})]}),"\n",(0,t.jsxs)(e.admonition,{type:"tip",children:[(0,t.jsx)(e.p,{children:"XMLHttpRequest \u5b8c\u5168\u57fa\u65bc\u4e8b\u4ef6\u8207 callback \u8a2d\u8a08\uff0c"}),(0,t.jsx)(e.p,{children:"\u7576\u975e\u540c\u6b65\u6d41\u7a0b\u8b8a\u591a\u6642\uff0c\u7a0b\u5f0f\u78bc\u5bb9\u6613\u88ab\u62c6\u6563\u3001\u5de2\u72c0\u5316\uff0c"}),(0,t.jsx)(e.p,{children:"\u53ef\u8b80\u6027\u8207\u7dad\u8b77\u6027\u90fd\u6703\u5feb\u901f\u4e0b\u964d\u3002"}),(0,t.jsx)(e.p,{children:"\ud83d\udc49 ES6 Promise / async await \u5c31\u662f\u70ba\u4e86\u89e3\u6c7a\u9019\u4e9b\u554f\u984c"})]}),"\n",(0,t.jsx)(e.h3,{id:"3\ufe0f\u20e3-\u5148\u628a\u8acb\u6c42\u5305\u6210\u51fd\u5f0f",children:"3\ufe0f\u20e3 \u5148\u628a\u8acb\u6c42\u5305\u6210\u51fd\u5f0f"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-js",children:'"use strict";\n\nconst getCountryAndNeighbour = function (country) {\n  //es5\u7684\u65b9\u5f0f \u767c\u9001GET\u8acb\u6c42\n  //AJAX CALL 1\n  const request = new XMLHttpRequest();\n  request.open("GET", `https://restcountries.com/v3.1/name/${country}`);\n  request.send(); //\u975e\u540c\u6b65\u50b3\u9001\u8acb\u6c42\u5230\u5f8c\u7aef\n\n  //\u4e8b\u4ef6\u9a45\u52d5(load\u4e8b\u4ef6\u767c\u751f\u6642\uff0c\u8abf\u7528callback)\n  request.addEventListener("load", function () {\n    //console.log("this", this); //xhr\u7269\u4ef6\n    const [data] = JSON.parse(this.responseText); //responseText\u7269\u4ef6\u5305\u5728[] \u9700\u8981\u7684\u8cc7\u6599\u683c\u5f0f\u662f\u9663\u5217\n    console.log("data", data);\n    console.log("data", data.name.common);\n  });\n};\n\ngetCountryAndNeighbour("portugal");\n\n'})}),"\n",(0,t.jsx)(e.h3,{id:"4\ufe0f\u20e3-\u56de\u547c\u5730\u7344\u55ae\u4e00\u8acb\u6c42--\u76f8\u4f9d\u8acb\u6c42\u7684\u771f\u5be6\u75db\u9ede",children:"4\ufe0f\u20e3 \u56de\u547c\u5730\u7344\uff08\u300c\u55ae\u4e00\u8acb\u6c42 \u2192 \u76f8\u4f9d\u8acb\u6c42\u300d\u7684\u771f\u5be6\u75db\u9ede\uff09"}),"\n",(0,t.jsx)(e.p,{children:"\u6211\u62ff\u5230\u4e86portugal\u8a72\u570b\u7684\u8cc7\u6599\uff0c\u6211\u60f3\u8981\u4f9d\u64da\u8a72\u570b\u5bb6\u53bb\u6293\u5b83\u9130\u570b\u7684\u8cc7\u6599\u5462\uff1f"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["\u6211\u7b2c\u4e8c\u6b21\u7684\u8acb\u6c42\u4f9d\u8cf4\u524d\u4e00\u6b21\u8acb\u6c42\u7684\u56de\u50b3\u7d50\u679c","\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"\u4e00\u6a23\u5148\u4f7f\u7528XHR\u4f86\u505a\uff1a"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-js",children:'"use strict";\n\nconst getCountryAndNeighbour = function (country) {\n  //es5\u7684\u65b9\u5f0f \u767c\u9001GET\u8acb\u6c42\n  //AJAX CALL 1\n  const request = new XMLHttpRequest();\n  request.open("GET", `https://restcountries.com/v3.1/name/${country}`);\n  request.send(); //\u975e\u540c\u6b65\u50b3\u9001\u8acb\u6c42\u5230\u5f8c\u7aef\n\n  //\u4e8b\u4ef6\u9a45\u52d5(load\u4e8b\u4ef6\u767c\u751f\u6642\uff0c\u8abf\u7528callback)\n  request.addEventListener("load", function () {\n    //console.log("this", this); //xhr\u7269\u4ef6\n    const [data] = JSON.parse(this.responseText); //responseText\u7269\u4ef6\u5305\u5728[] \u9700\u8981\u7684\u8cc7\u6599\u683c\u5f0f\u662f\u9663\u5217\n    console.log("data", data);\n    console.log("data", data.name.common);\n\n    //\u9019\u88e1\u6211\u5df2\u7d93\u5f97\u5230\u524d\u4e00\u6b21\u7684\u8acb\u6c42\u56de\u50b3\uff08\u897f\u73ed\u7259\u7684\u8cc7\u6599\uff09\n    //[\u53d6\u7684\u9130\u570b\u7684\u8cc7\u6599] \u8981\u5728\u767c\u51fa\u7b2c\u4e8c\u6b21\u8acb\u6c42\uff0c\u4f9d\u8cf4\u524d\u4e00\u6b21\u8acb\u6c42\u7684\u56de\u50b3\n    //console.log(data.borders?.[0]);\n    const [neighbour] = data.borders;\n    console.log(neighbour);\n\n    if (!neighbour) return;\n\n    //AJAX CALL 2\n    const request2 = new XMLHttpRequest();\n    request2.open("GET", `https://restcountries.com/v3.1/name/${neighbour}`);\n    request2.send(); //\u975e\u540c\u6b65\u50b3\u9001\u8acb\u6c42\u5230\u5f8c\u7aef\n\n    //\u4e8b\u4ef6\u9a45\u52d5(load\u4e8b\u4ef6\u767c\u751f\u6642\uff0c\u8abf\u7528callback)\n    request2.addEventListener("load", function () {\n      //console.log("this", this); //xhr\u7269\u4ef6\n      const [data2] = JSON.parse(this.responseText); //responseText\u7269\u4ef6\u5305\u5728[] \u9700\u8981\u7684\u8cc7\u6599\u683c\u5f0f\u662f\u9663\u5217\n      console.log("data2", data2);\n      console.log("data2", data2.name.common);\n    });\n  });\n};\n\ngetCountryAndNeighbour("portugal");\n\n'})}),"\n",(0,t.jsxs)(e.blockquote,{children:["\n",(0,t.jsx)(e.p,{children:"\u9019\u88e1\u53ef\u4ee5\u6e2c\u8a66\u7d50\u679c"}),"\n"]}),"\n",(0,t.jsx)("iframe",{height:"300",style:{width:"100%"},scrolling:"no",title:"callback hell xhr",src:"https://codepen.io/sui-hsialn/embed/XJKMMBy?default-tab=js",frameborder:"no",loading:"lazy",allowtransparency:"true",children:(0,t.jsxs)(e.p,{children:["See the Pen ",(0,t.jsx)("a",{href:"https://codepen.io/sui-hsialn/pen/XJKMMBy",children:"\ncallback hell xhr"})," by Sui Hsilan (",(0,t.jsx)("a",{href:"https://codepen.io/sui-hsialn",children:"@sui-hsialn"}),")\non ",(0,t.jsx)("a",{href:"https://codepen.io",children:"CodePen"}),"."]})}),"\n",(0,t.jsx)(e.p,{children:"\ud83d\udc49 \u70ba\u4ec0\u9ebc load \u6703\u5c0e\u81f4 callback hell\uff1f"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["\u56e0\u70ba\uff1a","\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"load \u662f\u300c\u4e8b\u4ef6\u300d"}),"\n",(0,t.jsx)(e.li,{children:"\u4e8b\u4ef6\u53ea\u80fd\u300c\u767c\u751f\u6642\u88ab\u52d5\u901a\u77e5\u300d"}),"\n",(0,t.jsx)(e.li,{children:"\u5982\u679c\u4e0b\u4e00\u500b\u8acb\u6c42 \u4f9d\u8cf4\u4e0a\u4e00\u500b\u7d50\u679c"}),"\n",(0,t.jsxs)(e.li,{children:["\u5c31\u53ea\u80fd\u300c\u4e8b\u4ef6\u88e1\u518d\u8a3b\u518a\u4e8b\u4ef6\u300d\n",(0,t.jsx)(e.code,{children:"load \u2192 load \u2192 load \u2192 ..."})]}),"\n",(0,t.jsx)(e.li,{children:"\ud83d\udc49 \u662f \u4e8b\u4ef6\u6a21\u578b\u672c\u8eab\u7684\u9650\u5236"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(e.admonition,{type:"tip",children:[(0,t.jsx)(e.p,{children:"XMLHttpRequest \u662f\u7b2c\u4e00\u4ee3 AJAX \u89e3\u6cd5\uff0c\u5b8c\u5168\u57fa\u65bc\u4e8b\u4ef6\u8207 callback\u3002"}),(0,t.jsx)(e.p,{children:".send() \u53ea\u8ca0\u8cac\u9001\u51fa\u8acb\u6c42\uff0c\u5be6\u969b\u7db2\u8def\u50b3\u8f38\u7531\u700f\u89bd\u5668\u8655\u7406\uff0c"}),(0,t.jsx)(e.p,{children:"JavaScript \u53ea\u80fd\u900f\u904e\u8a3b\u518a load \u4e8b\u4ef6\u4f86\u63a5\u6536\u7d50\u679c\u3002"}),(0,t.jsx)(e.p,{children:"\u7576\u8acb\u6c42\u4e4b\u9593\u7522\u751f\u4f9d\u8cf4\u95dc\u4fc2\u6642\uff0ccallback \u6703\u5feb\u901f\u5de2\u72c0\u5316\uff0c"}),(0,t.jsx)(e.p,{children:"\u9019\u5c31\u662f\u5f8c\u4f86 Promise \u8207 async/await \u51fa\u73fe\u7684\u539f\u56e0\u3002"})]}),"\n",(0,t.jsxs)(e.admonition,{type:"tip",children:[(0,t.jsx)(e.p,{children:"\u5728 XHR \u4e2d\uff0c\u975e\u540c\u6b65\u6d41\u7a0b\u662f\u300c\u4e8b\u4ef6\u9a45\u52d5\u300d\u7684\uff0c"}),(0,t.jsx)(e.p,{children:"XHR\uff1a\u4e8b\u4ef6\u767c\u751f \u2192 callback"}),(0,t.jsx)(e.p,{children:"Promise\uff1a\u72c0\u614b\u6539\u8b8a \u2192 resolve value"}),(0,t.jsx)(e.p,{children:"async/await\uff1a\u770b\u8d77\u4f86\u50cf\u540c\u6b65\uff0c\u5176\u5be6\u9084\u662f Promis"})]}),"\n",(0,t.jsxs)(e.blockquote,{children:["\n",(0,t.jsx)(e.p,{children:"load \u662f\u700f\u89bd\u5668\u5728\u975e\u540c\u6b65\u8acb\u6c42\u5b8c\u6210\u5f8c\u767c\u51fa\u7684\u901a\u77e5\u4e8b\u4ef6\uff0c"}),"\n"]}),"\n",(0,t.jsxs)(e.blockquote,{children:["\n",(0,t.jsx)(e.p,{children:"JavaScript \u53ea\u80fd\u88ab\u52d5\u63a5\u6536\uff0c\u7121\u6cd5\u4e3b\u52d5\u7b49\u5f85\uff0c"}),"\n"]}),"\n",(0,t.jsxs)(e.blockquote,{children:["\n",(0,t.jsx)(e.p,{children:"\u9019\u4e5f\u662f\u70ba\u4ec0\u9ebc\u5f8c\u4f86\u9700\u8981 Promise \u8207 async/await \u4f86\u6539\u5beb\u975e\u540c\u6b65\u6d41\u7a0b\u3002"}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"-\u7528settimeout\u518d\u89e3\u91cb\u4e00\u6b21",children:"\ud83d\udfe6 \u7528setTimeOut()\u518d\u89e3\u91cb\u4e00\u6b21"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-js",children:"setTimeout(() => {\n  console.log('\u904e\u4e86 1 \u79d2');\n\n  setTimeout(() => {\n    console.log('\u904e\u4e86 2 \u79d2');\n\n    setTimeout(() => {\n      console.log('\u904e\u4e86 3 \u79d2');\n\n      setTimeout(() => {\n        console.log('\u904e\u4e86 4 \u79d2');\n      }, 1000);\n\n    }, 1000);\n\n  }, 1000);\n\n}, 1000);\n\n// \"\u904e\u4e86 1 \u79d2\"\n// \"\u904e\u4e86 2 \u79d2\"\n// \"\u904e\u4e86 3 \u79d2\"\n// \"\u904e\u4e86 4 \u79d2\"\n"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsx)(e.p,{children:"\u767c\u751f\u4e86\u4ec0\u9ebc\uff08Do What\uff09"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"\ud83d\udc49 \u6bcf\u4e00\u500b setTimeout \u90fd\u5728\u7b49\u4e0a\u4e00\u500b\u5b8c\u6210\u5f8c\u624d\u57f7\u884c"}),"\n",(0,t.jsx)(e.li,{children:"setTimeout \u662f \u975e\u540c\u6b65"}),"\n",(0,t.jsx)(e.li,{children:"JavaScript \u4e0d\u6703\u7b49"}),"\n",(0,t.jsx)(e.li,{children:"\u5982\u679c\u4f60\u60f3\u8981\u300c\u9806\u5e8f\u57f7\u884c\u300d\uff0c\u53ea\u80fd\uff1a"}),"\n",(0,t.jsx)(e.li,{children:"\ud83d\udc49 \u628a\u4e0b\u4e00\u6b65\u5beb\u5728 callback \u88e1"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsx)(e.p,{children:"\u7d50\u69cb\u5c31\u6703\u8b8a\uff1a(\u547c\u61c9\u524d\u9762\u7684XHR\u56de\u547c\u5730\u7344)"}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"setTimeout\n  \u2514\u2500 setTimeout\n       \u2514\u2500 setTimeout\n            \u2514\u2500 setTimeout\n"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"\u4e3b\u7a0b\u5f0f\u8dd1\u5b8c\n\u2193\n1 \u79d2\u5230 \u2192 \u57f7\u884c\u7b2c\u4e00\u500b callback\n\u2193\n\u518d\u8a3b\u518a\u4e00\u500b setTimeout\n\u2193\n1 \u79d2\u5230 \u2192 \u57f7\u884c\u7b2c\u4e8c\u500b callback\n\u2193\n\u518d\u8a3b\u518a\u4e00\u500b setTimeout\n\u2193\n...\n\n"})}),"\n",(0,t.jsxs)(e.blockquote,{children:["\n",(0,t.jsx)(e.p,{children:"setTimeout \u4e26\u4e0d\u6703\u963b\u585e\u4e3b\u7a0b\u5f0f\uff0c\u800c\u662f\u628a callback \u8a3b\u518a\u5230\u4e8b\u4ef6\u4f47\u5217\uff0c\u7b49\u6642\u9593\u5230\u624d\u57f7\u884c\u3002"}),"\n"]}),"\n",(0,t.jsxs)(e.blockquote,{children:["\n",(0,t.jsx)(e.p,{children:"\u6240\u4ee5 ES6 \u624d\u5f15\u5165 Promise\uff0cES2017 \u624d\u6709 async / await"}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"0\ufe0f\u20e3-\u6539\u5beb\u6210-es6-promise",children:"0\ufe0f\u20e3 \u6539\u5beb\u6210 ES6 Promise"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-js",children:"const wait = seconds =>\n  new Promise(resolve => setTimeout(resolve, seconds * 1000));\n\nwait(1)\n  .then(() => {\n    console.log('1 second passed');\n    return wait(1);\n  })\n  .then(() => {\n    console.log('2 seconds passed');\n    return wait(1);\n  })\n  .then(() => {\n    console.log('3 seconds passed');\n    return wait(1);\n  })\n  .then(() => {\n    console.log('4 seconds passed');\n  });\n\n"})}),"\n",(0,t.jsx)("iframe",{height:"300",style:{width:"100%"},scrolling:"no",title:"Untitled",src:"https://codepen.io/sui-hsialn/embed/MYemWyY?default-tab=js",frameborder:"no",loading:"lazy",allowtransparency:"true",children:(0,t.jsxs)(e.p,{children:["See the Pen ",(0,t.jsx)("a",{href:"https://codepen.io/sui-hsialn/pen/MYemWyY",children:"\nUntitled"})," by Sui Hsilan (",(0,t.jsx)("a",{href:"https://codepen.io/sui-hsialn",children:"@sui-hsialn"}),")\non ",(0,t.jsx)("a",{href:"https://codepen.io",children:"CodePen"}),"."]})}),"\n",(0,t.jsx)(e.h3,{id:"1\ufe0f\u20e3-\u6539\u5beb-async--await",children:"1\ufe0f\u20e3 \u6539\u5beb async / await"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-js",children:'const wait = (seconds) => {\n  return new Promise((resolve) => setTimeout(resolve, seconds * 1000));\n};\n\nconst run = async () => {\n  await wait(1);\n  console.log("\u904e\u4e86 1 \u79d2");\n\n  await wait(1);\n  console.log("\u904e\u4e86 2 \u79d2");\n\n  await wait(1);\n  console.log("\u904e\u4e86 3 \u79d2");\n\n  await wait(1);\n  console.log("\u904e\u4e86 4 \u79d2");\n};\n\nrun();\n\n'})}),"\n",(0,t.jsx)("iframe",{height:"300",style:{width:"100%"},scrolling:"no",title:"async / await",src:"https://codepen.io/sui-hsialn/embed/raLmNjL?default-tab=js",frameborder:"no",loading:"lazy",allowtransparency:"true",children:(0,t.jsxs)(e.p,{children:["See the Pen ",(0,t.jsx)("a",{href:"https://codepen.io/sui-hsialn/pen/raLmNjL",children:"\nasync / await"})," by Sui Hsilan (",(0,t.jsx)("a",{href:"https://codepen.io/sui-hsialn",children:"@sui-hsialn"}),")\non ",(0,t.jsx)("a",{href:"https://codepen.io",children:"CodePen"}),"."]})}),"\n",(0,t.jsx)(e.h3,{id:"\u6642\u5e8f\u5716",children:"\u6642\u5e8f\u5716"}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.img,{alt:"event loop",src:s(60506).A+"",width:"800",height:"401"})}),"\n",(0,t.jsx)(e.mermaid,{value:"flowchart TD\n    A[\u4e3b\u7a0b\u5f0f\u958b\u59cb\u57f7\u884c] --\x3e B[\u8a3b\u518a\u7b2c\u4e00\u500b\u8a08\u6642\u5668\u4e00\u79d2]\n    B --\x3e C[\u4e3b\u7a0b\u5f0f\u7d50\u675f]\n\n    C --\x3e D[\u4e00\u79d2\u5230\u671f]\n    D --\x3e E[\u7b2c\u4e00\u500b callback \u9032\u5165\u4efb\u52d9\u4f47\u5217]\n\n    E --\x3e F[Call Stack \u7a7a]\n    F --\x3e G[\u57f7\u884c\u7b2c\u4e00\u500b callback]\n    G --\x3e H[\u8a3b\u518a\u7b2c\u4e8c\u500b\u8a08\u6642\u5668\u4e00\u79d2]\n\n    H --\x3e I[\u4e00\u79d2\u5230\u671f]\n    I --\x3e J[\u7b2c\u4e8c\u500b callback \u9032\u5165\u4efb\u52d9\u4f47\u5217]\n\n    J --\x3e K[Call Stack \u7a7a]\n    K --\x3e L[\u57f7\u884c\u7b2c\u4e8c\u500b callback]\n    L --\x3e M[\u8a3b\u518a\u7b2c\u4e09\u500b\u8a08\u6642\u5668\u4e00\u79d2]\n\n    M --\x3e N[\u4e00\u79d2\u5230\u671f]\n    N --\x3e O[\u7b2c\u4e09\u500b callback \u9032\u5165\u4efb\u52d9\u4f47\u5217]\n\n    O --\x3e P[Call Stack \u7a7a]\n    P --\x3e Q[\u57f7\u884c\u7b2c\u4e09\u500b callback]\n    Q --\x3e R[\u8a3b\u518a\u7b2c\u56db\u500b\u8a08\u6642\u5668\u4e00\u79d2]\n\n    R --\x3e S[\u4e00\u79d2\u5230\u671f]\n    S --\x3e T[\u7b2c\u56db\u500b callback \u9032\u5165\u4efb\u52d9\u4f47\u5217]\n\n    T --\x3e U[Call Stack \u7a7a]\n    U --\x3e V[\u57f7\u884c\u7b2c\u56db\u500b callback]\n\n    classDef main fill:#E3F2FD,stroke:#1E88E5,stroke-width:2px\n    classDef timer fill:#FFF3E0,stroke:#EF6C00,stroke-width:2px\n    classDef queue fill:#E8F5E9,stroke:#2E7D32,stroke-width:2px\n    classDef stack fill:#FCE4EC,stroke:#C2185B,stroke-width:2px\n\n    class A,B,C main\n    class D,I,N,S timer\n    class E,J,O,T queue\n    class F,G,K,L,P,Q,U,V stack\n"})]})}function h(n={}){const{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(d,{...n})}):d(n)}},28453(n,e,s){s.d(e,{R:()=>c,x:()=>r});var l=s(96540);const t={},i=l.createContext(t);function c(n){const e=l.useContext(i);return l.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function r(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(t):n.components||t:c(n.components),l.createElement(i.Provider,{value:e},n.children)}},60506(n,e,s){s.d(e,{A:()=>l});const l=s.p+"assets/images/Event-Loop-in-JavaScript-94f8157e230663d61e2f1c7d801bb919.jpg"}}]);