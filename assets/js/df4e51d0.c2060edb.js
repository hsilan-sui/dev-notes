"use strict";(globalThis.webpackChunksui_dev_notes=globalThis.webpackChunksui_dev_notes||[]).push([[7278],{28453(n,e,s){s.d(e,{R:()=>r,x:()=>c});var i=s(96540);const l={},d=i.createContext(l);function r(n){const e=i.useContext(d);return i.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(l):n.components||l:r(n.components),i.createElement(d.Provider,{value:e},n.children)}},99872(n,e,s){s.r(e),s.d(e,{assets:()=>t,contentTitle:()=>c,default:()=>a,frontMatter:()=>r,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"CiCd-Note/ghpages","title":"CI/CD \xd7 GitHub Pages \xd7 Docusaurus\u7b46\u8a18\u7e3d\u7d50","description":"GitHub Actions","source":"@site/docs/CiCd-Note/04-ghpages.md","sourceDirName":"CiCd-Note","slug":"/CiCd-Note/ghpages","permalink":"/dev-notes/docs/CiCd-Note/ghpages","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/CiCd-Note/04-ghpages.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"title":"CI/CD \xd7 GitHub Pages \xd7 Docusaurus\u7b46\u8a18\u7e3d\u7d50","sidebar_position":4},"sidebar":"tutorialSidebar","previous":{"title":"Github Actions\u90e8\u7f72gh-pages\u7b46\u8a18","permalink":"/dev-notes/docs/CiCd-Note/mycase-ghpages"},"next":{"title":"LINEOA-PORFOLIO","permalink":"/dev-notes/docs/category/lineoa-porfolio"}}');var l=s(74848),d=s(28453);const r={title:"CI/CD \xd7 GitHub Pages \xd7 Docusaurus\u7b46\u8a18\u7e3d\u7d50",sidebar_position:4},c=void 0,t={},o=[{value:"GitHub Actions",id:"github-actions",level:2},{value:"GitHub Pages \u8a2d\u5b9a\uff08\u4e00\u5b9a\u8981\u5c0d\u9f4a\uff09",id:"github-pages-\u8a2d\u5b9a\u4e00\u5b9a\u8981\u5c0d\u9f4a",level:3},{value:"\u26a0\ufe0f \u4eca\u5929\u7684\u96f7\u9ede\u6574\u7406",id:"\ufe0f-\u4eca\u5929\u7684\u96f7\u9ede\u6574\u7406",level:2},{value:"\u274c \u96f7 1\uff1a\u5617\u8a66\u7528 <code>docusaurus deploy</code> \u5728 GitHub Actions",id:"-\u96f7-1\u5617\u8a66\u7528-docusaurus-deploy-\u5728-github-actions",level:3},{value:"\u274c \u96f7 2\uff1a\u6df7\u7528\u591a\u7a2e Pages \u90e8\u7f72\u6a21\u5f0f",id:"-\u96f7-2\u6df7\u7528\u591a\u7a2e-pages-\u90e8\u7f72\u6a21\u5f0f",level:3},{value:"\u274c \u96f7 3\uff1a\u8aa4\u4ee5\u70ba build \u6210\u529f = \u7db2\u7ad9\u6703\u66f4\u65b0",id:"-\u96f7-3\u8aa4\u4ee5\u70ba-build-\u6210\u529f--\u7db2\u7ad9\u6703\u66f4\u65b0",level:3},{value:"\ud83e\udde0 \u4eca\u5929\u5b78\u5230\u7684\u95dc\u9375\u7e3d\u7d50",id:"-\u4eca\u5929\u5b78\u5230\u7684\u95dc\u9375\u7e3d\u7d50",level:2},{value:"1\ufe0f\u20e3 GitHub Pages \u7684\u672c\u8cea",id:"1\ufe0f\u20e3-github-pages-\u7684\u672c\u8cea",level:3},{value:"2\ufe0f\u20e3 CI/CD \u7684\u6b63\u78ba\u5206\u5de5",id:"2\ufe0f\u20e3-cicd-\u7684\u6b63\u78ba\u5206\u5de5",level:3},{value:"3\ufe0f\u20e3 \u70ba\u4ec0\u9ebc\u6700\u5f8c\u9019\u7248\u6703\u6210\u529f",id:"3\ufe0f\u20e3-\u70ba\u4ec0\u9ebc\u6700\u5f8c\u9019\u7248\u6703\u6210\u529f",level:3},{value:"\ud83e\udde9 \u7d50\u8ad6",id:"-\u7d50\u8ad6",level:2},{value:"\u6d41\u7a0b\u5716",id:"\u6d41\u7a0b\u5716",level:2}];function h(n){const e={blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",hr:"hr",li:"li",mermaid:"mermaid",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,d.R)(),...n.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(e.h2,{id:"github-actions",children:"GitHub Actions"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-yaml",children:"name: Deploy to GitHub Pages\n\non:\n  push:\n    branches:\n      - main\n\npermissions:\n  contents: write\n\njobs:\n  deploy:\n    runs-on: ubuntu-latest\n\n    steps:\n      - uses: actions/checkout@v4\n\n      - uses: actions/setup-node@v4\n        with:\n          node-version: 20\n          cache: npm\n\n      - name: Install dependencies\n        run: npm ci\n\n      - name: Build website\n        run: npm run build\n\n      - name: Deploy to gh-pages\n        uses: peaceiris/actions-gh-pages@v4\n        with:\n          github_token: ${{ secrets.GITHUB_TOKEN }}\n          publish_dir: ./build\n"})}),"\n",(0,l.jsx)(e.h3,{id:"github-pages-\u8a2d\u5b9a\u4e00\u5b9a\u8981\u5c0d\u9f4a",children:"GitHub Pages \u8a2d\u5b9a\uff08\u4e00\u5b9a\u8981\u5c0d\u9f4a\uff09"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"Source"}),"\uff1aDeploy from a branch"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"Branch"}),"\uff1a",(0,l.jsx)(e.code,{children:"gh-pages"})]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"Folder"}),"\uff1a",(0,l.jsx)(e.code,{children:"/ (root)"})]}),"\n"]}),"\n",(0,l.jsxs)(e.p,{children:["\ud83d\udc49 ",(0,l.jsx)(e.code,{children:"main"}),"\uff1a\u8ca0\u8cac\u539f\u59cb\u78bc\n\ud83d\udc49 ",(0,l.jsx)(e.code,{children:"gh-pages"}),"\uff1a\u53ea\u653e build \u5f8c\u7684\u975c\u614b\u6a94\n\ud83d\udc49 GitHub Pages\uff1a\u53ea\u5403 ",(0,l.jsx)(e.code,{children:"gh-pages"})]}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.h2,{id:"\ufe0f-\u4eca\u5929\u7684\u96f7\u9ede\u6574\u7406",children:"\u26a0\ufe0f \u4eca\u5929\u7684\u96f7\u9ede\u6574\u7406"}),"\n",(0,l.jsxs)(e.h3,{id:"-\u96f7-1\u5617\u8a66\u7528-docusaurus-deploy-\u5728-github-actions",children:["\u274c \u96f7 1\uff1a\u5617\u8a66\u7528 ",(0,l.jsx)(e.code,{children:"docusaurus deploy"})," \u5728 GitHub Actions"]}),"\n",(0,l.jsx)(e.p,{children:"\u8868\u9762\u770b\u8d77\u4f86\u5f88\u5408\u7406\uff0c\u4f46\u5be6\u969b\u554f\u984c\u5f88\u591a\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.code,{children:"docusaurus deploy"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u6703\u81ea\u5df1 clone repo"}),"\n",(0,l.jsx)(e.li,{children:"\u81ea\u5df1\u8dd1 git"}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.strong,{children:"\u5e38\u5e38\u6293\u4e0d\u5230 token"})}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u5c0e\u81f4\u53cd\u8986\u51fa\u73fe\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"could not read Password for 'https://github-actions[bot]@github.com'\n"})}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.p,{children:["\ud83d\udc49 ",(0,l.jsx)(e.strong,{children:"\u5de5\u5177\u4e0d\u9069\u5408 CI"})]}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.h3,{id:"-\u96f7-2\u6df7\u7528\u591a\u7a2e-pages-\u90e8\u7f72\u6a21\u5f0f",children:"\u274c \u96f7 2\uff1a\u6df7\u7528\u591a\u7a2e Pages \u90e8\u7f72\u6a21\u5f0f"}),"\n",(0,l.jsx)(e.p,{children:"\u540c\u6642\u5b58\u5728\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"docusaurus deploy"}),"\uff08\u81ea\u5df1\u63a8 gh-pages\uff09"]}),"\n",(0,l.jsx)(e.li,{children:"GitHub Pages \u81ea\u52d5 workflow"}),"\n",(0,l.jsx)(e.li,{children:"\u60f3\u5207 GitHub Actions Pages"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\ud83d\udc49 \u7d50\u679c\u662f\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u8ab0\u5728 deploy \u4e0d\u6e05\u695a"}),"\n",(0,l.jsx)(e.li,{children:"branch \u5c0d\u4e0d\u8d77\u4f86"}),"\n",(0,l.jsx)(e.li,{children:"\u770b\u8d77\u4f86\u300c\u6c92\u53cd\u61c9\u300d"}),"\n"]}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"\u5b78\u5230\u7684\u6559\u8a13"}),"\uff1a"]}),"\n",(0,l.jsxs)(e.blockquote,{children:["\n",(0,l.jsx)(e.p,{children:"\u4e00\u500b repo \u53ea\u80fd\u6709\u4e00\u500b\u300c\u8ca0\u8cac\u90e8\u7f72\u7684\u4eba\u300d"}),"\n"]}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.h3,{id:"-\u96f7-3\u8aa4\u4ee5\u70ba-build-\u6210\u529f--\u7db2\u7ad9\u6703\u66f4\u65b0",children:"\u274c \u96f7 3\uff1a\u8aa4\u4ee5\u70ba build \u6210\u529f = \u7db2\u7ad9\u6703\u66f4\u65b0"}),"\n",(0,l.jsx)(e.p,{children:"\u5be6\u969b\u4e0a\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"npm run build"}),"\n\ud83d\udc49 \u53ea\u662f\u5728 ",(0,l.jsx)(e.strong,{children:"main branch"})," \u7522\u751f ",(0,l.jsx)(e.code,{children:"build/"})]}),"\n",(0,l.jsxs)(e.li,{children:["GitHub Pages\n\ud83d\udc49 ",(0,l.jsx)(e.strong,{children:"\u5b8c\u5168\u4e0d\u770b main"}),"\n\ud83d\udc49 \u53ea\u770b ",(0,l.jsx)(e.code,{children:"gh-pages"})]}),"\n"]}),"\n",(0,l.jsxs)(e.p,{children:["\u6240\u4ee5\u5982\u679c\u6c92\u6709\u628a ",(0,l.jsx)(e.code,{children:"build/"})," \u63a8\u5230 ",(0,l.jsx)(e.code,{children:"gh-pages"}),"\uff1a"]}),"\n",(0,l.jsxs)(e.blockquote,{children:["\n",(0,l.jsx)(e.p,{children:"\u7db2\u7ad9\u4e00\u5b9a\u4e0d\u6703\u8b8a\uff08\u800c\u4e14\u662f\u6b63\u5e38\u7684\uff09"}),"\n"]}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.h2,{id:"-\u4eca\u5929\u5b78\u5230\u7684\u95dc\u9375\u7e3d\u7d50",children:"\ud83e\udde0 \u4eca\u5929\u5b78\u5230\u7684\u95dc\u9375\u7e3d\u7d50"}),"\n",(0,l.jsx)(e.h3,{id:"1\ufe0f\u20e3-github-pages-\u7684\u672c\u8cea",children:"1\ufe0f\u20e3 GitHub Pages \u7684\u672c\u8cea"}),"\n",(0,l.jsxs)(e.blockquote,{children:["\n",(0,l.jsxs)(e.p,{children:["GitHub Pages = ",(0,l.jsx)(e.strong,{children:"\u8b80\u67d0\u500b branch \u7684\u975c\u614b\u6a94\uff0c\u76f4\u63a5\u767c\u7ad9"})]}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u5b83\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u4e0d\u5e6b\u4f60 build"}),"\n",(0,l.jsx)(e.li,{children:"\u4e0d\u7ba1\u4f60\u7528\u4ec0\u9ebc\u6846\u67b6"}),"\n",(0,l.jsx)(e.li,{children:"\u53ea\u7ba1\u300c\u6a94\u6848\u5728\u54ea\u300d"}),"\n"]}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.h3,{id:"2\ufe0f\u20e3-cicd-\u7684\u6b63\u78ba\u5206\u5de5",children:"2\ufe0f\u20e3 CI/CD \u7684\u6b63\u78ba\u5206\u5de5"}),"\n",(0,l.jsxs)(e.table,{children:[(0,l.jsx)(e.thead,{children:(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.th,{children:"\u89d2\u8272"}),(0,l.jsx)(e.th,{children:"\u8ca0\u8cac\u4ec0\u9ebc"})]})}),(0,l.jsxs)(e.tbody,{children:[(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"GitHub Actions"}),(0,l.jsx)(e.td,{children:"build / deploy"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"main branch"}),(0,l.jsx)(e.td,{children:"\u539f\u59cb\u78bc"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"gh-pages branch"}),(0,l.jsx)(e.td,{children:"\u975c\u614b\u6a94"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"GitHub Pages"}),(0,l.jsx)(e.td,{children:"\u767c\u7ad9"})]})]})]}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.h3,{id:"3\ufe0f\u20e3-\u70ba\u4ec0\u9ebc\u6700\u5f8c\u9019\u7248\u6703\u6210\u529f",children:"3\ufe0f\u20e3 \u70ba\u4ec0\u9ebc\u6700\u5f8c\u9019\u7248\u6703\u6210\u529f"}),"\n",(0,l.jsx)(e.p,{children:"\u56e0\u70ba\u9019\u4e00\u884c\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-yaml",children:"uses: peaceiris/actions-gh-pages@v4\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u5b83\u5e6b\u4f60\u8655\u7406\u4e86\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"token \u6ce8\u5165"}),"\n",(0,l.jsx)(e.li,{children:"git push"}),"\n",(0,l.jsx)(e.li,{children:"gh-pages \u66f4\u65b0"}),"\n",(0,l.jsx)(e.li,{children:"\u5404\u7a2e\u8a8d\u8b49\u7d30\u7bc0"}),"\n"]}),"\n",(0,l.jsxs)(e.p,{children:["\ud83d\udc49 ",(0,l.jsx)(e.strong,{children:"\u4f60\u53ea\u8981\u544a\u8a34\u5b83\uff1abuild \u5728\u54ea\u500b\u8cc7\u6599\u593e"})]}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.h2,{id:"-\u7d50\u8ad6",children:"\ud83e\udde9 \u7d50\u8ad6"}),"\n",(0,l.jsxs)(e.blockquote,{children:["\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Docusaurus \u5c08\u6848\u5728 GitHub Pages \u4e0a\uff0c\n\u6700\u7a69\u5b9a\u7684\u505a\u6cd5\u662f\uff1a\nGitHub Actions build \u2192 actions-gh-pages \u63a8 gh-pages"})}),"\n"]}),"\n",(0,l.jsxs)(e.blockquote,{children:["\n",(0,l.jsx)(e.p,{children:(0,l.jsxs)(e.strong,{children:["\u4e0d\u8981\u786c\u4fee ",(0,l.jsx)(e.code,{children:"docusaurus deploy"}),"\uff0c\n\u90a3\u662f\u7d66\u672c\u6a5f\u7528\u7684\uff0c\u4e0d\u662f\u7d66 CI \u7528\u7684\u3002"]})}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"\u6d41\u7a0b\u5716",children:"\u6d41\u7a0b\u5716"}),"\n",(0,l.jsx)(e.mermaid,{value:"flowchart TB\n\n    %% ====== \u5206\u5c64\u7d50\u69cb ======\n    subgraph DEV[\u958b\u767c\u8005\u64cd\u4f5c\u5c64]\n        A[\u63a8\u9001\u7a0b\u5f0f\u78bc\u5230 main]\n    end\n\n    subgraph CI[GitHub Actions CI \u5c64]\n        B[\u5b89\u88dd\u5957\u4ef6]\n        C[\u5efa\u7f6e\u975c\u614b\u7db2\u7ad9]\n        D[\u90e8\u7f72\u5230 gh-pages]\n    end\n\n    subgraph REPO[GitHub Repo \u5206\u652f\u5c64]\n        E[main \u5206\u652f \u539f\u59cb\u78bc]\n        F[gh-pages \u5206\u652f \u975c\u614b\u6a94\u6848]\n    end\n\n    subgraph PAGES[GitHub Pages \u767c\u7ad9\u5c64]\n        G[GitHub Pages \u8b80\u53d6 gh-pages]\n        H[\u7db2\u7ad9\u66f4\u65b0\u5b8c\u6210]\n    end\n\n    %% ====== \u6d41\u7a0b ======\n    A --\x3e E\n    E --\x3e B\n    B --\x3e C\n    C --\x3e D\n    D --\x3e F\n    F --\x3e G\n    G --\x3e H\n\n    %% ====== \u6a23\u5f0f\u5b9a\u7fa9 ======\n    classDef dev fill:#E3F2FD,stroke:#1E88E5,color:#0D47A1\n    classDef ci fill:#E8F5E9,stroke:#43A047,color:#1B5E20\n    classDef repo fill:#FFF3E0,stroke:#FB8C00,color:#E65100\n    classDef pages fill:#F3E5F5,stroke:#8E24AA,color:#4A148C\n\n    class A dev\n    class B,C,D ci\n    class E,F repo\n    class G,H pages\n"}),"\n",(0,l.jsx)(e.hr,{})]})}function a(n={}){const{wrapper:e}={...(0,d.R)(),...n.components};return e?(0,l.jsx)(e,{...n,children:(0,l.jsx)(h,{...n})}):h(n)}}}]);