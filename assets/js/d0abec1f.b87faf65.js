"use strict";(globalThis.webpackChunksui_dev_notes=globalThis.webpackChunksui_dev_notes||[]).push([[9371],{13942(e,n,s){s.r(n),s.d(n,{assets:()=>t,contentTitle:()=>o,default:()=>a,frontMatter:()=>c,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"JavaScript/promise","title":"\u3010AJAX_ES6\u3011Promise","description":"\u800c\u70ba\u4e86\u89e3\u6c7a\u300ccallback \u5730\u7344\u300d(callback hell)\u554f\u984c\uff0cES6\u5c31\u51fa\u73fe\u4e86 promise \u65b9\u6cd5","source":"@site/docs/JavaScript/03-promise.mdx","sourceDirName":"JavaScript","slug":"/JavaScript/promise","permalink":"/dev-notes/docs/JavaScript/promise","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/JavaScript/03-promise.mdx","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"title":"\u3010AJAX_ES6\u3011Promise","sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"\u3010AJAX_ES5\u3011\u4f7f\u7528(XHR)XMLHttpReques\u767c\u9001 Ajax Call","permalink":"/dev-notes/docs/JavaScript/ajaxXhr copy"},"next":{"title":"Deploy your site","permalink":"/dev-notes/docs/JavaScript/deploy-your-site"}}');var l=s(74848),i=s(28453);const c={title:"\u3010AJAX_ES6\u3011Promise",sidebar_position:3},o=void 0,t={},d=[{value:"\ud83d\udfe7 \u4ec0\u9ebc\u662f Promise\uff1f",id:"-\u4ec0\u9ebc\u662f-promise",level:2},{value:"\ud83d\udfe6 \u5efa\u69cb\u7b2c\u4e00\u500b promise",id:"-\u5efa\u69cb\u7b2c\u4e00\u500b-promise",level:2},{value:"0\ufe0f\u20e3 \u300c\u767b\u8a18\u8ab0\u8981\u63a5\u7d50\u679c\u300d",id:"0\ufe0f\u20e3-\u767b\u8a18\u8ab0\u8981\u63a5\u7d50\u679c",level:3},{value:"1\ufe0f\u20e3 \u300c\u767b\u8a18\u8ab0\u8981\u63a5\u7d50\u679c\u300d=&gt; \u52a0\u4e0a .then()\uff0c\u770b\u6e05\u695a\u300c\u5206\u5de5\u300d",id:"1\ufe0f\u20e3-\u767b\u8a18\u8ab0\u8981\u63a5\u7d50\u679c-\u52a0\u4e0a-then\u770b\u6e05\u695a\u5206\u5de5",level:3},{value:"2\ufe0f\u20e3 \u5e38\u898b\u932f\u8aa4",id:"2\ufe0f\u20e3-\u5e38\u898b\u932f\u8aa4",level:3},{value:"3\ufe0f\u20e3 \u6e2c\u9a573",id:"3\ufe0f\u20e3-\u6e2c\u9a573",level:3},{value:"4\ufe0f\u20e3 \u6e2c\u9a57\u984c",id:"4\ufe0f\u20e3-\u6e2c\u9a57\u984c",level:3},{value:"\ud83d\udfe6 \u6aa2\u67e5\u6210\u7e3e\u5206\u6578",id:"-\u6aa2\u67e5\u6210\u7e3e\u5206\u6578",level:2},{value:"0\ufe0f\u20e3 promise\u5e36\u53c3\u6578",id:"0\ufe0f\u20e3-promise\u5e36\u53c3\u6578",level:3},{value:"1\ufe0f\u20e3 \u64b0\u5bebcatch\u6d41\u7a0b",id:"1\ufe0f\u20e3-\u64b0\u5bebcatch\u6d41\u7a0b",level:3},{value:"2\ufe0f\u20e3 promise chain \u5beb\u6cd5",id:"2\ufe0f\u20e3-promise-chain-\u5beb\u6cd5",level:3},{value:"3\ufe0f\u20e3 promise catch \u591a\u689d\u4ef6\u8a2d\u8a08",id:"3\ufe0f\u20e3-promise-catch-\u591a\u689d\u4ef6\u8a2d\u8a08",level:3},{value:"4\ufe0f\u20e3 async. await",id:"4\ufe0f\u20e3-async-await",level:3},{value:"\ud83d\udfe6 promise.all",id:"-promiseall",level:2},{value:"\ud83d\udfe6 fetch \u8207 promise\u7684\u95dc\u4fc2",id:"-fetch-\u8207-promise\u7684\u95dc\u4fc2",level:2},{value:"\ud83d\udfe6 \u5617\u8a66\u5beb axios.get \u5957\u4ef6\u529f\u80fd",id:"-\u5617\u8a66\u5beb-axiosget-\u5957\u4ef6\u529f\u80fd",level:2}];function h(e){const n={admonition:"admonition",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",hr:"hr",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components},{Highlight:s}=n;return s||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Highlight",!0),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"\u800c\u70ba\u4e86\u89e3\u6c7a\u300ccallback \u5730\u7344\u300d(callback hell)\u554f\u984c\uff0cES6\u5c31\u51fa\u73fe\u4e86 promise \u65b9\u6cd5"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"-\u4ec0\u9ebc\u662f-promise",children:"\ud83d\udfe7 \u4ec0\u9ebc\u662f Promise\uff1f"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(s,{color:"#1877F2",children:"Promise \u662f\u4e00\u500b\u7269\u4ef6(\u53ea\u662f\u4e00\u500b\u72c0\u614b\u5bb9\u5668)\uff0c\u7528\u4f86\u300c\u4ee3\u8868\u4e00\u500b\u672a\u4f86\u624d\u6703\u77e5\u9053\u7d50\u679c\u7684\u503c\u300d\u3002"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"Promise \u53ea\u8ca0\u8cac\u300c\u8a18\u9304\u72c0\u614b\u300d"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"\u72c0\u614b"}),(0,l.jsx)(n.th,{children:"\u4e2d\u6587"}),(0,l.jsx)(n.th,{children:"\u610f\u601d"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"pending"}),(0,l.jsx)(n.td,{children:"\u7b49\u5f85\u4e2d"}),(0,l.jsx)(n.td,{children:"\u9084\u4e0d\u77e5\u9053\u7d50\u679c"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"fulfilled"}),(0,l.jsx)(n.td,{children:"\u6210\u529f"}),(0,l.jsx)(n.td,{children:"\u77e5\u9053\u7d50\u679c\u662f\u6210\u529f"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"rejected"}),(0,l.jsx)(n.td,{children:"\u5931\u6557"}),(0,l.jsx)(n.td,{children:"\u77e5\u9053\u7d50\u679c\u662f\u5931\u6557"})]})]})]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u26a0\ufe0f \u4e00\u65e6\u9032\u5165\u6210\u529f\u6216\u5931\u6557"}),"\n",(0,l.jsx)(n.li,{children:"\u26a0\ufe0f \u6c38\u9060\u4e0d\u6703\u518d\u8b8a"}),"\n"]}),"\n",(0,l.jsxs)(n.admonition,{type:"tip",children:[(0,l.jsx)(n.p,{children:"\u4e00\u500b Promise \u4e00\u958b\u59cb\u4e00\u5b9a\u662f\u7b49\u5f85\u4e2d"}),(0,l.jsx)(n.p,{children:"\u7b49\u4e8b\u60c5\u7d50\u675f\u5f8c"}),(0,l.jsx)(n.p,{children:"\u53ea\u6703\u8d70\u5411\u6210\u529f\u6216\u5931\u6557\u5176\u4e2d\u4e00\u689d\u8def"})]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Do\uff08\u5be6\u969b\u5728\u505a\u4ec0\u9ebc\uff09"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u62ff\u5230\u4e00\u500b Promise"}),"\n",(0,l.jsx)(n.li,{children:"\u5e6b\u5b83\u767b\u8a18\u6210\u529f\u8207\u5931\u6557\u6642\u7684\u53cd\u61c9"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"What\uff08\u5be6\u969b\u767c\u751f\u4ec0\u9ebc\uff09"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u4efb\u52d9\u5728\u80cc\u666f\u8dd1"}),"\n",(0,l.jsx)(n.li,{children:"Promise \u72c0\u614b\u6539\u8b8a"}),"\n",(0,l.jsx)(n.li,{children:"\u5c0d\u61c9\u7684 handler \u88ab\u89f8\u767c"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"How\uff08\u600e\u9ebc\u89f8\u767c\uff09"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u6210\u529f \u2192 \u9032 fulfilled \u2192 then"}),"\n",(0,l.jsx)(n.li,{children:"\u5931\u6557 \u2192 \u9032 rejected \u2192 catch"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Why\uff08\u70ba\u4ec0\u9ebc\u8981\u9019\u6a23\uff09"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u628a\u300c\u672a\u4f86\u7684\u503c\u300d\u7576\u6210\u73fe\u5728\u53ef\u4ee5\u64cd\u4f5c\u7684\u6771\u897f"}),"\n",(0,l.jsx)(n.li,{children:"\u53ef\u4ee5\u4e32\u63a5\u3001\u50b3\u905e\u3001\u7d71\u4e00\u932f\u8aa4\u8655\u7406"}),"\n",(0,l.jsx)(n.li,{children:"\u89e3\u6c7a callback \u5730\u7344"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"-\u5efa\u69cb\u7b2c\u4e00\u500b-promise",children:"\ud83d\udfe6 \u5efa\u69cb\u7b2c\u4e00\u500b promise"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Promise\u67b6\u69cb\u5716"}),"\n"]}),"\n",(0,l.jsx)(n.mermaid,{value:'flowchart TD\n  A["\u5efa\u7acbnew Promise(\u6211\u8cb7\u7684\u4e00\u5f35\u6a02\u900f)"] --\x3e B["\u7b49\u5f85\u4e2d pending(\u9084\u6c92\u958b\u734e)"]\n  B --\x3e|\u6210\u529fresolved \u4e2d\u734e\u6709\u9322| C["\u6210\u529f\u5b8c\u6210"]\n  B --\x3e|\u5931\u6557reject \u6c92\u4e2d| D["\u5931\u6557\u5b8c\u6210"]\n\n  C --\x3e E["\u547c\u53eb .then(data) \u6211\u5148\u767b\u8a18\u597d\uff0c\u7b49\u4f60\u6210\u529f\u6642\u518d\u901a\u77e5\u6211"]\n  D --\x3e F["\u547c\u53eb .catch(error) \u6211\u5148\u767b\u8a18\u597d\uff0c\u7b49\u4f60\u5931\u6557\u6642\u518d\u901a\u77e5\u6211"]\n\n  classDef promise fill:#3f51b5,color:#fff\n  classDef pending fill:#90caf9,color:#000\n  classDef fulfilled fill:#66bb6a,color:#000\n  classDef rejected fill:#ef5350,color:#000\n  classDef handler fill:#333,color:#fff\n\n  class A promise\n  class B pending\n  class C fulfilled\n  class D rejected\n  class E,F handler\n'}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.p,{children:"new Promise \u662f\u5728\u300c\u5ba3\u544a\u4e00\u500b\u898f\u5247\u300d\uff1a\n\u672a\u4f86\u4ec0\u9ebc\u6642\u5019\u6210\u529f\u3001\u4ec0\u9ebc\u6642\u5019\u5931\u6557\u3002"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-js",children:'const checkScore = new Promise((resolve, reject) => {//pending\n   // \u5728\u9019\u88e1\u662f Promise \u7684\u300c\u88c1\u5224\u5ba4\u300d\uff1d>\u6c7a\u5b9a\uff1a\u4ec0\u9ebc\u689d\u4ef6\u4e0b \u6210\u529f or \u4ec0\u9ebc\u689d\u4ef6\u4e0b \u5931\u6557\n   resolve("\u6210\u529f\u4e86");\n})\n'})}),"\n",(0,l.jsx)(n.admonition,{type:"danger",children:(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"JavaScript \u7acb\u523b\u505a\u4e86 3 \u4ef6\u4e8b\uff08\u540c\u6b65\uff09"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u5efa\u7acb\u4e00\u500b Promise \u7269\u4ef6"}),"\n",(0,l.jsx)(n.li,{children:"\u72c0\u614b\u4e00\u958b\u59cb\u5c31\u662f\u300c\u7b49\u5f85\u4e2d\u300d"}),"\n",(0,l.jsx)(n.li,{children:"\u7acb\u523b\u57f7\u884c\u50b3\u9032\u53bb\u7684\u90a3\u500b function"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"\u26a0\ufe0f \u6ce8\u610f\uff1a"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\ud83d\udc49 \u9019\u500b function \u662f\u300c\u540c\u6b65\u57f7\u884c\u300d\u7684"}),"\n"]}),"\n"]}),"\n"]})}),"\n",(0,l.jsx)(n.h3,{id:"0\ufe0f\u20e3-\u767b\u8a18\u8ab0\u8981\u63a5\u7d50\u679c",children:"0\ufe0f\u20e3 \u300c\u767b\u8a18\u8ab0\u8981\u63a5\u7d50\u679c\u300d"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-js",children:'const checkScore = new Promise((resolve, reject) => {//pending\n   // \u5728\u9019\u88e1\u662f Promise \u7684\u300c\u88c1\u5224\u5ba4\u300d\uff1d>\u6c7a\u5b9a\uff1a\u4ec0\u9ebc\u689d\u4ef6\u4e0b \u6210\u529f or \u4ec0\u9ebc\u689d\u4ef6\u4e0b \u5931\u6557\n   resolve("\u6210\u529f\u4e86");\n})\n'})}),"\n",(0,l.jsxs)(n.admonition,{type:"tip",children:[(0,l.jsx)(n.p,{children:"\u9019\u6bb5\u7a0b\u5f0f\u78bc\u505a\u4e86\u4ec0\u9ebc\uff1f"}),(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Promise \u88ab\u5efa\u7acb"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"executor \u7acb\u523b\u57f7\u884c"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"resolve() \u88ab\u547c\u53eb"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Promise \u72c0\u614b\u8b8a\u6210\u300c\u6210\u529f\u5b8c\u6210\u300d"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Promise \u88e1\u9762\u8a18\u4f4f\u4e86\u300c\u6210\u529f\u4e86\u300d"}),"\n"]}),"\n"]}),(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\ud83d\udc49 \u4f46\u6c92\u6709\u4efb\u4f55\u6771\u897f\u88ab\u5370\u51fa\u4f86"}),"\n",(0,l.jsxs)(n.li,{children:["\u70ba\u4ec0\u9ebc\uff1f","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u56e0\u70ba\u6211\u9084\u6c92\u300c\u767b\u8a18\u8ab0\u8981\u63a5\u7d50\u679c\u300d\u3002"}),"\n"]}),"\n"]}),"\n"]})]}),"\n",(0,l.jsx)(n.h3,{id:"1\ufe0f\u20e3-\u767b\u8a18\u8ab0\u8981\u63a5\u7d50\u679c-\u52a0\u4e0a-then\u770b\u6e05\u695a\u5206\u5de5",children:"1\ufe0f\u20e3 \u300c\u767b\u8a18\u8ab0\u8981\u63a5\u7d50\u679c\u300d=> \u52a0\u4e0a .then()\uff0c\u770b\u6e05\u695a\u300c\u5206\u5de5\u300d"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-js",children:'const p = new Promise((resolve, reject) => {\n  resolve("\u6210\u529f\u4e86");\n});\n\np.then(data => {\n  console.log(data);\n});\n\n'})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"new Promise\uff1a\u6c7a\u5b9a\u7d50\u679c\u662f\u4ec0\u9ebc"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:".then()\uff1a\u6c7a\u5b9a\u7d50\u679c\u8981\u600e\u9ebc\u7528"}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"2\ufe0f\u20e3-\u5e38\u898b\u932f\u8aa4",children:"2\ufe0f\u20e3 \u5e38\u898b\u932f\u8aa4"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\ud83d\udc49 \u9019\u500b Promise \u662f\u6210\u529f\u9084\u662f\u7b49\u5f85\u4e2d\uff1f","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u6c38\u9060\u662f\u7b49\u5f85\u4e2d"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-js",children:'new Promise((resolve, reject) => {\n  return "\u6210\u529f";\n});\n\n'})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Promise \u5b8c\u5168\u4e0d\u5728\u4e4e executor \u7684 return \u503c\u3002"}),"\n"]}),"\n",(0,l.jsx)(n.admonition,{type:"danger",children:(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"\u9010\u884c\u767c\u751f\u4e86\u4ec0\u9ebc"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"\u5efa\u7acb\u4e00\u500b Promise"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.ol,{start:"2",children:["\n",(0,l.jsx)(n.li,{children:"Promise \u72c0\u614b\u4e00\u958b\u59cb\u662f\u300c\u7b49\u5f85\u4e2d\u300d"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.ol,{start:"3",children:["\n",(0,l.jsx)(n.li,{children:"executor function \u7acb\u523b\u540c\u6b65\u57f7\u884c"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.ol,{start:"4",children:["\n",(0,l.jsx)(n.li,{children:'return "\u6210\u529f" \u88ab\u57f7\u884c'}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.ol,{start:"5",children:["\n",(0,l.jsx)(n.li,{children:"\u6c92\u6709\u4eba\u547c\u53eb resolve \u6216 reject"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"\ud83d\udc49 Promise \u6c38\u9060\u505c\u5728\u7b49\u5f85\u4e2d"}),"\n"]}),"\n"]})}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"\u5beb\u6cd5"}),(0,l.jsx)(n.th,{children:"Promise \u72c0\u614b"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:'return "\u6210\u529f"'})}),(0,l.jsx)(n.td,{children:"\u7b49\u5f85\u4e2d"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:'resolve("\u6210\u529f")'})}),(0,l.jsx)(n.td,{children:"\u6210\u529f\u5b8c\u6210"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:'reject("\u932f\u8aa4")'})}),(0,l.jsx)(n.td,{children:"\u5931\u6557\u5b8c\u6210"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u4ec0\u9ebc\u90fd\u4e0d\u505a"}),(0,l.jsx)(n.td,{children:"\u6c38\u9060\u7b49\u5f85"})]})]})]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-js",children:'new Promise((resolve, reject) => {\n  resolve("\u6210\u529f");\n  return "\u5931\u6557";\n});\n\n'})}),"\n",(0,l.jsxs)(n.admonition,{type:"tip",children:[(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Promise \u53ea\u807d\u7b2c\u4e00\u6b21\u88ab\u547c\u53eb\u7684 resolve / reject\u3002"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"\u7cbe\u6e96\u57f7\u884c\u6d41\u7a0b\uff08\u7167\u6642\u9593\u9806\u5e8f\uff09"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"\u5efa\u7acb Promise\uff08\u72c0\u614b\uff1a\u7b49\u5f85\u4e2d\uff09"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.ol,{start:"2",children:["\n",(0,l.jsx)(n.li,{children:"executor \u540c\u6b65\u57f7\u884c"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.ol,{start:"3",children:["\n",(0,l.jsx)(n.li,{children:'resolve("\u6210\u529f") \u88ab\u547c\u53eb'}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.ol,{start:"4",children:["\n",(0,l.jsx)(n.li,{children:"Promise \u72c0\u614b \u2192 \u6210\u529f\u5b8c\u6210"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.ol,{start:"5",children:["\n",(0,l.jsx)(n.li,{children:"Promise \u8a18\u4f4f\u503c\uff1a\u300c\u6210\u529f\u300d"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.ol,{start:"6",children:["\n",(0,l.jsx)(n.li,{children:'return "\u5931\u6557" \u88ab\u57f7\u884c'}),"\n"]}),"\n"]}),"\n"]}),(0,l.jsx)(n.p,{children:"\u26a0\ufe0f Promise \u5b8c\u5168\u5ffd\u7565"}),(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"executor \u7d50\u675f"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"\ud83d\udc49 Promise \u65e9\u5c31\u5b9a\u578b\u4e86"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"\ud83d\udd12 Promise \u72c0\u614b\u9396\u5b9a\u898f\u5247"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u7b2c\u4e00\u6b21 resolve \u6216 reject \u5c31\u9396\u6b7b"}),"\n",(0,l.jsx)(n.li,{children:"\u5f8c\u9762\u7684 resolve / reject / return"}),"\n",(0,l.jsx)(n.li,{children:"\u5168\u90e8\u7121\u6548"}),"\n"]}),"\n"]}),"\n"]})]}),"\n",(0,l.jsx)(n.h3,{id:"3\ufe0f\u20e3-\u6e2c\u9a573",children:"3\ufe0f\u20e3 \u6e2c\u9a573"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-js",children:'new Promise((resolve, reject) => {\n  setTimeout(() => {\n    resolve("\u6210\u529f");\n  }, 0);\n  reject("\u5931\u6557");\n});\n\n'})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u662f\u5931\u6557\u72c0\u614b"}),"\n"]}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"Promise \u53ea\u770b\u300c\u8ab0\u5148\u547c\u53eb resolve / reject\u300d\uff0c\u4e0d\u770b\u8ab0\u5beb\u5728\u524d\u9762\u3002"}),"\n"]}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"\u5beb\u6cd5"}),(0,l.jsx)(n.th,{children:"\u7d50\u679c"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:'resolve("A"); resolve("B");'})}),(0,l.jsx)(n.td,{children:"\u6210\u529f A"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:'reject("\u932f"); resolve("\u597d");'})}),(0,l.jsx)(n.td,{children:"\u5931\u6557"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:'resolve("\u597d"); reject("\u932f");'})}),(0,l.jsx)(n.td,{children:"\u6210\u529f"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:'return "\u503c"'})}),(0,l.jsx)(n.td,{children:"\u6c92\u5f71\u97ff"})]})]})]}),"\n",(0,l.jsx)(n.h3,{id:"4\ufe0f\u20e3-\u6e2c\u9a57\u984c",children:"4\ufe0f\u20e3 \u6e2c\u9a57\u984c"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-js",children:'new Promise((resolve, reject) => {\n  setTimeout(() => reject("\u932f\u8aa4"), 0);\n  setTimeout(() => resolve("\u6210\u529f"), 0);\n});\n\n'})}),"\n",(0,l.jsx)(n.admonition,{type:"tip",children:(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"\u5169\u500b\u90fd\u662f 0\uff0c\u4e0d\u662f\u540c\u6642\u8dd1\uff1b"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"\u8ab0\u300c\u5148\u88ab\u6392\u9032\u4f47\u5217\u3001\u5148\u57f7\u884c\u300d\uff0c\u8ab0\u5c31\u5148\u6539\u72c0\u614b\u3002"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"\u5728\u9019\u6bb5\u7a0b\u5f0f\u78bc\u88e1\uff1a"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u7b2c\u4e00\u500b setTimeout \u5148\u8a3b\u518a"}),"\n",(0,l.jsx)(n.li,{children:"\u7b2c\u4e8c\u500b setTimeout \u5f8c\u8a3b\u518a"}),"\n",(0,l.jsx)(n.li,{children:"\u4f47\u5217\u662f \u5148\u9032\u5148\u51fa"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:'\ud83d\udc49 \u7b2c\u4e00\u500b callback \u5148\u8dd1 \u2192 reject("\u932f\u8aa4") \u5148\u767c\u751f \u2192 Promise \u7acb\u523b\u9396\u6b7b'}),"\n"]}),"\n"]})}),"\n",(0,l.jsx)(n.mermaid,{value:'flowchart TD\n  A["\u8a3b\u518a\u7b2c\u4e00\u500b timer"] --\x3e B["\u8a3b\u518a\u7b2c\u4e8c\u500b timer"]\n  B --\x3e C["\u4f47\u5217\u5148\u9032\u5148\u51fa"]\n  C --\x3e D["\u5148\u57f7\u884c reject"]\n  D --\x3e E["Promise \u5931\u6557\u9396\u5b9a"]\n  E --\x3e F["resolve \u88ab\u5ffd\u7565"]\n\n  classDef step fill:#90caf9,color:#000\n  classDef reject fill:#ef5350,color:#000\n  classDef lock fill:#333,color:#fff\n\n  class A,B,C step\n  class D reject\n  class E,F lock\n'}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"-\u6aa2\u67e5\u6210\u7e3e\u5206\u6578",children:"\ud83d\udfe6 \u6aa2\u67e5\u6210\u7e3e\u5206\u6578"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-js",children:'const checkScore = new Promise((resolve, reject) => {\n  console.log(`====\u6b63\u5728\u6279\u6539\u4e2d====`)\n  setTimeout(() =>{\n    const score = Math.round(Math.random() * 100);\n    if(score >= 60) {\n      resolve(score)\n    } else {\n      reject("\u4e0d\u53ca\u683c")\n    }\n  }, 2000)\n})\n\ncheckScore\n  .then(data => console.log(data))\n  .catch(error => console.log(error))\n'})}),"\n",(0,l.jsx)(n.h3,{id:"0\ufe0f\u20e3-promise\u5e36\u53c3\u6578",children:"0\ufe0f\u20e3 promise\u5e36\u53c3\u6578"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-js",children:'const checkScore = (score) => {\n  return new Promise((resolve, reject) => {\n    console.log(`====\u6b63\u5728\u89c0\u5bdf\u662f\u5426\u53ca\u683c====`)\n    setTimeout(() =>{\n        // const score = Math.round(Math.random() * 100);\n        if(score >= 60) {\n          resolve(score);\n        } else {\n          reject("\u4e0d\u53ca\u683c");\n        }\n      }, 2000)\n  })\n}\n\ncheckScore(80)\n  .then(data => console.log(data))\n  .catch(error => console.log(error))\n'})}),"\n",(0,l.jsx)(n.h3,{id:"1\ufe0f\u20e3-\u64b0\u5bebcatch\u6d41\u7a0b",children:"1\ufe0f\u20e3 \u64b0\u5bebcatch\u6d41\u7a0b"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-js",children:'const correctTest = (name) => {\n  console.log("\u6279\u6539\u6210\u7e3e\u4e2d");\n  return new Promise((reslove, reject) => {\n    setTimeout(() => {\n      const score = Math.round(Math.random() * 100);\n      if (score >= 60) {\n        resolve({\n          name,\n          score\n        });\n      } else {\n        reject("\u4f60\u5df2\u9054\u5230\u9000\u5b78\u9580\u6abb");\n      }\n    }, 2000);\n  });\n};\n\ncorrectTest("\u5c0f\u660e")\n  .then((data) => console.log(data))\n  .catch((error) => console.log(error));\n'})}),"\n",(0,l.jsx)(n.h3,{id:"2\ufe0f\u20e3-promise-chain-\u5beb\u6cd5",children:"2\ufe0f\u20e3 promise chain \u5beb\u6cd5"}),"\n",(0,l.jsx)(s,{color:"#EF6C00",children:"\u4e00\u500b then\uff0c\u53ea\u6703\u63a5\u6536\u5230\u300c\u4e0a\u4e00\u500b Promise resolve \u7684\u503c\u300d"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-js",children:'const correctTest = (name) => {\n  console.log("\u6279\u6539\u6210\u7e3e\u4e2d");\n\n  return new Promise((resolve, reject) => {\n    setTimeout(() => {\n      const score = Math.round(Math.random() * 100);\n\n      if (score >= 60) {\n        resolve({ name, score });\n      } else {\n        reject("\u4f60\u5df2\u9054\u5230\u9000\u5b78\u9580\u6abb");\n      }\n    }, 1000);\n  });\n};\n\nconst checkReward = (data) => {\n  console.log("\u6b63\u5728\u6aa2\u67e5\u8ab0\u62bd\u4e2d\u734e\u4e2d");\n\n  return new Promise((resolve) => {\n    setTimeout(() => {\n      if(data.score >= 90) {\n        resolve(`${data.name}\u7372\u5f97\u96fb\u5f71\u7968`);\n      } else if(data.score >= 60 && data.score <90) {\n        resolve(`${data.name}\u7372\u5f97\u5609\u734e`);\n      }\n    }, 1000);\n  });\n};\n\ncorrectTest("\u5c0f\u660e")\n  .then((data) => {\n    return checkReward(data);\n  }) //\u53ea\u8981\u4f60\u5728 then \u88e1 return Promise\n  .then((reward) => {\n    //\u5916\u5c64 then \u5c31\u6703\u300c\u7b49\u9019\u500b Promise \u7d50\u675f\u300d\n    console.log(reward);\n  })\n  .catch((error) => {\n    console.log(error);\n  });\n'})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"then \u6703\u56de\u50b3\u4e00\u500b\u65b0\u7684 Promise\u3002"}),"\n",(0,l.jsx)(n.li,{children:"\u5982\u679c\u5728 then \u88e1 return \u4e00\u500b Promise"}),"\n",(0,l.jsx)(n.li,{children:"\u5916\u5c64 then \u5c31\u6703\u7b49\u5f85\u5b83\u5b8c\u6210\uff0c\u4e26\u628a resolve \u7684\u503c\u50b3\u7d66\u4e0b\u4e00\u500b then"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"3\ufe0f\u20e3-promise-catch-\u591a\u689d\u4ef6\u8a2d\u8a08",children:"3\ufe0f\u20e3 promise catch \u591a\u689d\u4ef6\u8a2d\u8a08"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-js",children:'const correctTest = (name) => {\n  console.log("\u6279\u6539\u6210\u7e3e\u4e2d");\n\n  return new Promise((resolve, reject) => {\n    setTimeout(() => {\n      const score = Math.round(Math.random() * 100);\n\n      if (score >= 20) {\n        resolve({ name, score });\n      } else {\n        reject("\u4f60\u5df2\u9054\u5230\u9000\u5b78\u9580\u6abb");\n      }\n    }, 1000);\n  });\n};\n\nconst checkReward = (data) => {\n  console.log("\u6b63\u5728\u6aa2\u67e5\u8ab0\u62bd\u4e2d\u734e\u4e2d");\n\n  return new Promise((resolve) => {\n    setTimeout(() => {\n      if(data.score >= 90) {\n        resolve(`${data.name}\u7372\u5f97\u96fb\u5f71\u7968`);\n      } else if(data.score >= 20 && data.score <90) {\n        resolve(`${data.name}\u7372\u5f97\u5609\u734e`);\n      } else {\n        reject("\u4f60\u6c92\u6709\u734e\u54c1")\n      }\n    }, 1000);\n  });\n};\n\ncorrectTest("\u5c0f\u660e")\n  .then((data) => {\n    return checkReward(data);\n  }) //\u53ea\u8981\u4f60\u5728 then \u88e1 return Promise\n  .then((reward) => {\n    //\u5916\u5c64 then \u5c31\u6703\u300c\u7b49\u9019\u500b Promise \u7d50\u675f\u300d\n    console.log(reward);\n  })\n  .catch((error) => {\n    console.log(error);\n  });\n'})}),"\n",(0,l.jsx)(n.h3,{id:"4\ufe0f\u20e3-async-await",children:"4\ufe0f\u20e3 async. await"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-js",children:'const correctTest = (name) => {\n  console.log("\u6279\u6539\u6210\u7e3e\u4e2d");\n\n  return new Promise((resolve, reject) => {\n    setTimeout(() => {\n      const score = Math.round(Math.random() * 100);\n\n      if (score >= 20) {\n        resolve({ name, score });\n      } else {\n        reject("\u4f60\u5df2\u9054\u5230\u9000\u5b78\u9580\u6abb");\n      }\n    }, 1000);\n  });\n};\n\nconst checkReward = (data) => {\n  console.log("\u6b63\u5728\u6aa2\u67e5\u8ab0\u62bd\u4e2d\u734e\u4e2d");\n\n  return new Promise((resolve) => {\n    setTimeout(() => {\n      if (data.score >= 90) {\n        resolve(`${data.name}\u7372\u5f97\u96fb\u5f71\u7968`);\n      } else if (data.score >= 60 && data.score < 90) {\n        resolve(`${data.name}\u7372\u5f97\u5609\u734e`);\n      } else {\n        reject("\u4f60\u6c92\u6709\u734e\u54c1\uff0c\u6253\u624b10\u4e0b");\n      }\n    }, 1000);\n  });\n};\n\n// correctTest("\u5c0f\u660e")\n//   .then((data) => {\n//     return checkReward(data);\n//   }) //\u53ea\u8981\u4f60\u5728 then \u88e1 return Promise\n//   .then((reward) => {\n//     //\u5916\u5c64 then \u5c31\u6703\u300c\u7b49\u9019\u500b Promise \u7d50\u675f\u300d\n//     console.log(reward);\n//   })\n//   .catch((error) => {\n//     console.log(error);\n//   });\n\nconst init = async function () {\n  try {\n    const studentA = await correctTest("\u5c0f\u660e");\n    const rewardA = await checkReward(studentA);\n    console.log(rewardA);\n  } catch (error) {\n    console.log(error);\n  }\n};\n\ninit();\n\n'})}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"-promiseall",children:"\ud83d\udfe6 promise.all"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-js",children:"const correctTest = (name) => {\n  console.log(\"\u6279\u6539\u6210\u7e3e\u4e2d\");\n\n  return new Promise((resolve, reject) => {\n    setTimeout(() => {\n      const score = Math.round(Math.random() * 100);\n      resolve({ name, score });\n\n    }, Math.random() * 10000);\n  });\n};\n\nPromise.all([correctTest('sui'),correctTest('ii'),correctTest('xx')])\n  .then(data => console.log(data))\n"})}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"-fetch-\u8207-promise\u7684\u95dc\u4fc2",children:"\ud83d\udfe6 fetch \u8207 promise\u7684\u95dc\u4fc2"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-js",children:"const url = `https://raw.githubusercontent.com/hexschool/2021-ui-frontend-job/master/frontend_data.json`\n\nfetch(url)\n  .then(response => response.json())\n  .then(data => console.log(data))\n  .catch(error => console.log(error))\n"})}),"\n",(0,l.jsx)("iframe",{height:"300",style:{width:"100%"},scrolling:"no",title:"Untitled",src:"https://codepen.io/sui-hsialn/embed/ByzRzgB?default-tab=js",frameborder:"no",loading:"lazy",allowtransparency:"true",children:(0,l.jsxs)(n.p,{children:["See the Pen ",(0,l.jsx)("a",{href:"https://codepen.io/sui-hsialn/pen/ByzRzgB",children:"\nUntitled"})," by Sui Hsilan (",(0,l.jsx)("a",{href:"https://codepen.io/sui-hsialn",children:"@sui-hsialn"}),")\non ",(0,l.jsx)("a",{href:"https://codepen.io",children:"CodePen"}),"."]})}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"-\u5617\u8a66\u5beb-axiosget-\u5957\u4ef6\u529f\u80fd",children:"\ud83d\udfe6 \u5617\u8a66\u5beb axios.get \u5957\u4ef6\u529f\u80fd"})]})}function a(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(h,{...e})}):h(e)}},28453(e,n,s){s.d(n,{R:()=>c,x:()=>o});var r=s(96540);const l={},i=r.createContext(l);function c(e){const n=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:c(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);